import { useState, useMemo, useRef } from "react";

// ===== COMPACT DATA =====
const D=[{id:1,num:1,n:"투여물질의 조제물 분석",c:"조제물분석",s:"-",d:"-",desc:"투여물질의 조제물 분석\n- 조제물분석법 Validation\n- HPLC 분석\n- 균질성, 안전성 및 함량 측정\n- 분석법 및 표준품 의뢰자 제공",op:null,or:"-",ow:"6~",ip:null,ir:"-",iw:"6~",warn:[{t:"edit",x:"투여물질의 조제물 분석 <견적 시마다 계산하여 수정할 것>"}]},{id:2,num:2,n:"설치류 단회 투여 독성시험",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 3",op:4600000,or:"경구",ow:7,ip:4600000,ir:"정맥",iw:7},{id:3,num:3,n:"설치류 1주 DRF",c:"반복투여독성",s:"SD rat",d:"1주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 4",op:17000000,or:"경구",ow:5,ip:18000000,ir:"정맥",iw:5},{id:4,num:4,n:"설치류 2주 DRF",c:"반복투여독성",s:"SD rat",d:"2주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 4",op:18000000,or:"경구",ow:6,ip:20000000,ir:"정맥",iw:6},{id:5,num:5,n:"설치류 4주 DRF",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 4",op:20000000,or:"경구",ow:8,ip:28000000,ir:"정맥",iw:8},{id:6,num:6,n:"설치류 2주 반복투여 독성",c:"반복투여독성",s:"SD rat",d:"2주",desc:"- 암수 각각 10마리/군\n- 대조군 1, 시험군 3",op:73000000,or:"경구",ow:20,ip:76000000,ir:"정맥",iw:20},{id:7,num:7,n:"설치류 2주 반복 2주 회복",c:"반복투여독성",s:"SD rat",d:"2주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 1",op:22000000,or:"경구",ow:22,ip:24000000,ir:"정맥",iw:22},{id:8,num:8,n:"설치류 2주 TK 6pt(채혈+분석)",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point\n- 교차채혈(point당 암수 3마리)\n- LC/MS/MS, Full Validation, ISR(10%)",op:76000000,or:"-",ow:16,ip:82000000,ir:"-",iw:16},{id:9,num:9,n:"설치류 2주 TK 8pt(채혈+분석)",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point\n- LC/MS/MS 분석",op:86000000,or:"-",ow:16,ip:92000000,ir:"-",iw:16},{id:10,num:10,n:"설치류 2주 TK 6pt(채혈만)",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point\n- 의뢰자측 검체 전달",op:18000000,or:"-",ow:16,ip:23000000,ir:"-",iw:16},{id:11,num:11,n:"설치류 2주 TK 8pt(채혈만)",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point\n- 의뢰자측 검체 전달",op:22000000,or:"-",ow:16,ip:28000000,ir:"-",iw:16},{id:12,num:12,n:"설치류 4주 반복투여 독성",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 10마리/군\n- 대조군 1, 시험군 3",op:79000000,or:"경구",ow:22,ip:86000000,ir:"정맥",iw:22},{id:13,num:13,n:"설치류 4주 반복 2주 회복",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 1",op:24000000,or:"경구",ow:24,ip:27000000,ir:"정맥",iw:24},{id:14,num:14,n:"설치류 4주 TK 6pt(채혈+분석)",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point\n- LC/MS/MS, Full Validation",op:79000000,or:"-",ow:24,ip:85000000,ir:"-",iw:24},{id:15,num:15,n:"설치류 4주 TK 8pt(채혈+분석)",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point\n- LC/MS/MS 분석",op:89000000,or:"-",ow:24,ip:95000000,ir:"-",iw:24},{id:16,num:16,n:"설치류 4주 TK 6pt(채혈만)",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point, 검체 전달",op:21000000,or:"-",ow:18,ip:26000000,ir:"-",iw:18},{id:17,num:17,n:"설치류 4주 TK 8pt(채혈만)",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point, 검체 전달",op:25000000,or:"-",ow:18,ip:31000000,ir:"-",iw:18},{id:18,num:18,n:"설치류 13주 반복투여 독성",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 10마리/군\n- 대조군 1, 시험군 3",op:112000000,or:"경구",ow:31,ip:142000000,ir:"정맥",iw:31},{id:19,num:19,n:"설치류 13주 반복 4주 회복",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 1",op:32000000,or:"경구",ow:35,ip:39000000,ir:"정맥",iw:35},{id:20,num:20,n:"설치류 13주 TK(2회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point\n- 2회 채혈, LC/MS/MS",op:88000000,or:"-",ow:35,ip:100000000,ir:"-",iw:35},{id:21,num:21,n:"설치류 13주 TK(2회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point, LC/MS/MS",op:98000000,or:"-",ow:35,ip:110000000,ir:"-",iw:35},{id:22,num:22,n:"설치류 13주 TK(2회) 6pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point, 검체 전달",op:30000000,or:"-",ow:27,ip:42000000,ir:"-",iw:27},{id:23,num:23,n:"설치류 13주 TK(2회) 8pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point, 검체 전달",op:35000000,or:"-",ow:27,ip:46000000,ir:"-",iw:27},{id:24,num:24,n:"설치류 13주 TK(3회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 378 point, LC/MS/MS",op:106000000,or:"-",ow:35,ip:117000000,ir:"-",iw:35},{id:25,num:25,n:"설치류 13주 TK(3회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 486 point, LC/MS/MS",op:121000000,or:"-",ow:35,ip:132000000,ir:"-",iw:35},{id:26,num:26,n:"설치류 13주 TK(3회) 6pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 378 point",op:40000000,or:"-",ow:27,ip:51000000,ir:"-",iw:27},{id:27,num:27,n:"설치류 13주 TK(3회) 8pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 486 point",op:46000000,or:"-",ow:27,ip:58000000,ir:"-",iw:27},{id:28,num:28,n:"설치류 26주 반복투여 독성",c:"반복투여독성",s:"SD rat",d:"26주",desc:"- 암수 각각 10마리/군\n- 대조군 1, 시험군 3",op:162000000,or:"경구",ow:44,ip:214000000,ir:"정맥",iw:44},{id:29,num:29,n:"설치류 26주 반복 4주 회복",c:"반복투여독성",s:"SD rat",d:"26주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 1",op:41000000,or:"경구",ow:48,ip:52000000,ir:"정맥",iw:48},{id:30,num:30,n:"설치류 26주 TK(2회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point",op:108000000,or:"-",ow:40,ip:123000000,ir:"-",iw:40},{id:31,num:31,n:"설치류 26주 TK(2회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point",op:117000000,or:"-",ow:40,ip:133000000,ir:"-",iw:40},{id:32,num:32,n:"설치류 26주 TK(2회) 6pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point",op:50000000,or:"-",ow:40,ip:65000000,ir:"-",iw:40},{id:33,num:33,n:"설치류 26주 TK(2회) 8pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point",op:54000000,or:"-",ow:40,ip:70000000,ir:"-",iw:40},{id:34,num:34,n:"설치류 26주 TK(3회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 378 point",op:125000000,or:"-",ow:40,ip:141000000,ir:"-",iw:40},{id:35,num:35,n:"설치류 26주 TK(3회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 486 point",op:139000000,or:"-",ow:40,ip:155000000,ir:"-",iw:40},{id:36,num:36,n:"설치류 26주 TK(3회) 6pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 378 point",op:59000000,or:"-",ow:40,ip:75000000,ir:"-",iw:40},{id:37,num:37,n:"설치류 26주 TK(3회) 8pt 채혈만",c:"독성동태",s:"-",d:"-",desc:"- 총 486 point",op:65000000,or:"-",ow:40,ip:81000000,ir:"-",iw:40},{id:38,num:38,n:"비설치류 단회 독성(DE법)",c:"단회투여독성",s:"Beagle dog",d:"3회",desc:"- DE(dose escalation)법\n- 암수 2마리/군, 시험군 1\n- 7일 간격 총 3회 투여",op:41000000,or:"경구(capsule)",ow:12,ip:41000000,ir:"정맥",iw:12,warn:[{t:"note",x:"* DE(dose escalation) 법"}]},{id:39,num:39,n:"비설치류 단회 투여 독성",c:"단회투여독성",s:"Beagle dog",d:"1회",desc:"- 암수 각각 2마리/군\n- 대조군 1, 시험군 3",op:96000000,or:"경구(capsule)",ow:10,ip:96000000,ir:"정맥",iw:10},{id:40,num:40,n:"비설치류 1주 DRF",c:"반복투여독성",s:"Beagle dog",d:"1주",desc:"- 암수 각각 1마리/군\n- 대조군 1, 시험군 4",op:79000000,or:"경구(capsule)",ow:9,ip:79000000,ir:"정맥",iw:9},{id:41,num:41,n:"비설치류 2주 DRF",c:"반복투여독성",s:"Beagle dog",d:"2주",desc:"- 암수 각각 1마리/군\n- 대조군 1, 시험군 4",op:81000000,or:"경구(capsule)",ow:10,ip:82000000,ir:"정맥",iw:10},{id:42,num:42,n:"비설치류 4주 DRF",c:"반복투여독성",s:"Beagle dog",d:"4주",desc:"- 암수 각각 1마리/군\n- 대조군 1, 시험군 4",op:84000000,or:"경구(capsule)",ow:12,ip:85000000,ir:"정맥",iw:12},{id:43,num:43,n:"비설치류 13주 DRF(4군)",c:"반복투여독성",s:"Beagle dog",d:"13주",desc:"- 암수 각각 1마리/군\n- 대조군 1, 시험군 4",op:99000000,or:"경구(capsule)",ow:21,ip:100000000,ir:"정맥",iw:21},{id:44,num:44,n:"비설치류 13주 DRF(3군)",c:"반복투여독성",s:"Beagle dog",d:"13주",desc:"- 암수 각각 1마리/군\n- 대조군 1, 시험군 3",op:81000000,or:"경구(capsule)",ow:21,ip:97700000,ir:"정맥",iw:21},{id:45,num:45,n:"비설치류 2주 반복투여 독성",c:"반복투여독성",s:"Beagle dog",d:"2주",desc:"- 암수 각각 3마리/군\n- 대조군 1, 시험군 3",op:195000000,or:"경구(capsule)",ow:23,ip:197000000,ir:"정맥",iw:23},{id:46,num:46,n:"비설치류 2주 반복 2주 회복",c:"반복투여독성",s:"Beagle dog",d:"2주",desc:"- 암수 각각 2마리/군\n- 대조군 1, 시험군 1",op:63000000,or:"경구(capsule)",ow:25,ip:64000000,ir:"정맥",iw:25},{id:47,num:47,n:"비설치류 2주 TK 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point\n- LC/MS/MS 분석",op:68000000,or:"-",ow:"-",ip:68000000,ir:"-",iw:"-"},{id:48,num:48,n:"비설치류 2주 TK 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point\n- LC/MS/MS 분석",op:78000000,or:"-",ow:"-",ip:78000000,ir:"-",iw:"-"},{id:49,num:49,n:"비설치류 4주 반복투여 독성",c:"반복투여독성",s:"Beagle dog",d:"4주",desc:"- 암수 각각 3마리/군\n- 대조군 1, 시험군 3",op:201000000,or:"경구(capsule)",ow:25,ip:203000000,ir:"정맥",iw:25},{id:50,num:50,n:"비설치류 4주 반복 2주 회복",c:"반복투여독성",s:"Beagle dog",d:"4주",desc:"- 암수 각각 2마리/군\n- 대조군 1, 시험군 1",op:64000000,or:"경구(capsule)",ow:27,ip:65000000,ir:"정맥",iw:27},{id:51,num:51,n:"비설치류 4주 TK 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point",op:68000000,or:"-",ow:"-",ip:68000000,ir:"-",iw:"-"},{id:52,num:52,n:"비설치류 4주 TK 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point",op:78000000,or:"-",ow:"-",ip:78000000,ir:"-",iw:"-"},{id:53,num:53,n:"비설치류 13주 반복투여 독성",c:"반복투여독성",s:"Beagle dog",d:"13주",desc:"- 암수 각각 3마리/군\n- 대조군 1, 시험군 3",op:241000000,or:"경구(capsule)",ow:34,ip:248000000,ir:"정맥",iw:34},{id:54,num:54,n:"비설치류 13주 반복 4주 회복",c:"반복투여독성",s:"Beagle dog",d:"13주",desc:"- 암수 각각 2마리/군\n- 대조군 1, 시험군 1",op:78000000,or:"경구(capsule)",ow:38,ip:80000000,ir:"정맥",iw:38},{id:55,num:55,n:"비설치류 13주 TK(2회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point",op:68000000,or:"-",ow:"-",ip:68000000,ir:"-",iw:"-"},{id:56,num:56,n:"비설치류 13주 TK(2회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point",op:78000000,or:"-",ow:"-",ip:78000000,ir:"-",iw:"-"},{id:57,num:57,n:"비설치류 13주 TK(3회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 378 point",op:85000000,or:"-",ow:"-",ip:85000000,ir:"-",iw:"-"},{id:58,num:58,n:"비설치류 13주 TK(3회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 486 point",op:109000000,or:"-",ow:"-",ip:109000000,ir:"-",iw:"-"},{id:59,num:59,n:"비설치류 26주 반복투여 독성",c:"반복투여독성",s:"Beagle dog",d:"26주",desc:"- 암수 각각 3마리/군\n- 대조군 1, 시험군 3",op:305000000,or:"경구(capsule)",ow:47,ip:301900000,ir:"정맥",iw:47},{id:60,num:60,n:"비설치류 26주 반복 4주 회복",c:"반복투여독성",s:"Beagle dog",d:"26주",desc:"- 암수 각각 2마리/군\n- 대조군 1, 시험군 1",op:99000000,or:"경구(capsule)",ow:51,ip:103000000,ir:"정맥",iw:51},{id:61,num:61,n:"비설치류 26주 TK(2회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point",op:68000000,or:"-",ow:"-",ip:68000000,ir:"-",iw:"-"},{id:62,num:62,n:"비설치류 26주 TK(2회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point",op:78000000,or:"-",ow:"-",ip:78000000,ir:"-",iw:"-"},{id:63,num:63,n:"비설치류 26주 TK(3회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 378 point",op:85000000,or:"-",ow:"-",ip:85000000,ir:"-",iw:"-"},{id:64,num:64,n:"비설치류 26주 TK(3회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 486 point",op:109000000,or:"-",ow:"-",ip:109000000,ir:"-",iw:"-"},{id:65,num:65,n:"비설치류 39주 반복투여 독성",c:"반복투여독성",s:"Beagle dog",d:"39주",desc:"- 암수 각각 3마리/군\n- 대조군 1, 시험군 3",op:402000000,or:"경구(capsule)",ow:47,ip:422000000,ir:"정맥",iw:47},{id:66,num:66,n:"비설치류 39주 반복 4주 회복",c:"반복투여독성",s:"Beagle dog",d:"39주",desc:"- 암수 각각 2마리/군\n- 대조군 1, 시험군 1",op:127000000,or:"경구(capsule)",ow:51,ip:133000000,ir:"정맥",iw:51},{id:67,num:67,n:"비설치류 39주 TK(2회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 252 point",op:68000000,or:"-",ow:"-",ip:68000000,ir:"-",iw:"-"},{id:68,num:68,n:"비설치류 39주 TK(2회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 324 point",op:78000000,or:"-",ow:"-",ip:78000000,ir:"-",iw:"-"},{id:69,num:69,n:"비설치류 39주 TK(3회) 6pt",c:"독성동태",s:"-",d:"-",desc:"- 총 378 point",op:85000000,or:"-",ow:"-",ip:85000000,ir:"-",iw:"-"},{id:70,num:70,n:"비설치류 39주 TK(3회) 8pt",c:"독성동태",s:"-",d:"-",desc:"- 총 486 point",op:109000000,or:"-",ow:"-",ip:109000000,ir:"-",iw:"-"},{id:71,num:71,n:"유전독성 : Ames(TG471)",c:"유전독성",s:"-",d:"-",desc:"- 5개 균주(TA100,TA1535,TA98,TA1537,WP2uvrA)\n- 복귀돌연변이 집락 수 관찰\n- 예비시험 포함\n- 재현성 추가시험 시 +200만원",op:6500000,or:"-",ow:5,ip:6500000,ir:"-",iw:5,warn:[{t:"cost",x:"- 재현성 확인을 위한 추가시험 진행 시 비용추가"},{t:"cost",x:"(추가금액 2,000,000원)"}]},{id:72,num:72,n:"유전독성 : 염색체이상(TG473)",c:"유전독성",s:"Cell",d:"-",desc:"- CHL 세포\n- 구조/수적 이상 관찰\n- 예비시험 포함",op:15000000,or:"-",ow:9,ip:15000000,ir:"-",iw:9},{id:73,num:73,n:"유전독성 : 소핵시험(TG474)",c:"유전독성",s:"SD rat",d:"-",desc:"- 6마리/군, 총 5군\n- 골수 미성숙 적혈구내 소핵관찰\n- 예비시험 포함",op:18000000,or:"경구",ow:9,ip:18000000,ir:"정맥",iw:9},{id:74,num:74,n:"유전독성 : MLA(OECD490)",c:"유전독성",s:"Cell",d:"-",desc:"- Mouse lymphoma L5178Y\n- 8 dose, 예비시험 진행\n- 콜로니 계수, 돌연변이율 산출",op:36000000,or:"-",ow:14,ip:36000000,ir:"-",iw:14},{id:75,num:75,n:"유전독성 : Comet(TG489)",c:"유전독성",s:"SD rat",d:"-",desc:"- 6마리/군, 5군\n- 3일 투여, 간 적출\n- DNA 손상 평가(Tail DNA/length/moment)\n- 예비시험 진행",op:53000000,or:"경구",ow:12,ip:53000000,ir:"정맥",iw:12},{id:76,num:76,n:"유전독성 : Pig-a(TG470)",c:"유전독성",s:"SD rat",d:"4주",desc:"- 6마리/군, 5군\n- 28일 투여\n- Pig-a 유전자 돌연변이 평가\n- FACS 분석",op:75000000,or:"경구",ow:18,ip:75000000,ir:"경구",iw:18},{id:77,num:77,n:"안전성약리 : 중추신경계",c:"안전성약리",s:"SD rat",d:"단회",desc:"- 4군/대조군 1, 시험군 3\n- 8마리/군",op:20000000,or:"경구",ow:12,ip:20000000,ir:"정맥",iw:12},{id:78,num:77,n:"안전성약리 : 호흡기계",c:"안전성약리",s:"SD rat",d:"단회",desc:"- 4군/대조군 1, 시험군 3\n- 8마리/군",op:22000000,or:"경구",ow:12,ip:22000000,ir:"정맥",iw:12},{id:79,num:78,n:"안전성약리 : hERG(국내)",c:"안전성약리",s:"Cell",d:"단회",desc:"- hERG assay(cell)\n- 부형제 대조군 1, 시험군 4, 양성 1\n- 예비시험 포함",op:20000000,or:"-",ow:12,ip:20000000,ir:"-",iw:12},{id:80,num:79,n:"안전성약리 : hERG(USFDA)",c:"안전성약리",s:"Cell",d:"단회",desc:"- hERG assay(cell)\n- 양성대조군 4\n- 예비시험 포함",op:40000000,or:"-",ow:12,ip:40000000,ir:"-",iw:12},{id:81,num:80,n:"안전성약리 : Telemetry",c:"안전성약리",s:"Beagle dog",d:"단회",desc:"- Telemetry assay\n- Cross over(4마리/군)",op:85000000,or:"경구",ow:12,ip:85000000,ir:"정맥",iw:12},{id:82,num:81,n:"생식독성 : 수태능/초기배 발생",c:"생식독성",s:"SD rat",d:"4-9주",desc:"- 암수 각각 22마리/군\n- 대조군 1, 시험군 3\n- 교배전~착상까지",op:111000000,or:"경구",ow:30,ip:122000000,ir:"정맥",iw:30},{id:83,num:82,n:"생식독성 : 배태자 DRF(Rat)",c:"생식독성",s:"SD rat",d:"GD6-17",desc:"- 임신암컷 6마리/군, 4군\n- 착상~경구개 폐쇄시기",op:35000000,or:"경구",ow:12,ip:39000000,ir:"정맥",iw:12},{id:84,num:null,n:"생식독성 : 배태자 본시험(Rat)",c:"생식독성",s:"SD rat",d:"GD6-17",desc:"- 임신암컷 25마리/군\n- 대조군 1, 시험군 3",op:101000000,or:"-",ow:null,ip:111000000,ir:"-",iw:null,warn:[{t:"note",x:"* 모체(부형제대조군): 투여전, 투여 후 1 시간"},{t:"note",x:"** 모체(시험물질 투여군): 투여 전, 투여 후 0.5, 1, 2, 6 및 24 시간"},{t:"note",x:"*** 태자: 투여 후 1 hr(총 1 point)"}]},{id:85,num:83,n:"생식독성 : 배태자 TK(Rat)",c:"생식독성",s:"SD rat",d:"-",desc:"- 총 176 point\n- 암컷 8마리/군, 교차채혈\n- LC/MS/MS, Full Validation, ISR",op:97000000,or:"-",ow:29,ip:103000000,ir:"-",iw:29,warn:[{t:"cost",x:"별도추가 : 투여일이 매일 투여가 아닐 경우"}]},{id:86,num:84,n:"생식독성 : 태반이행(Rat)",c:"생식독성",s:"SD rat",d:"-",desc:"- 총 12 point, 별도 추가\n- LC/MS/MS",op:15000000,or:"-",ow:29,ip:17000000,ir:"-",iw:29},{id:87,num:85,n:"생식독성 : 배태자 DRF(Rabbit)",c:"생식독성",s:"Rabbit",d:"GD6-19",desc:"- 임신암컷 6마리/군, 4군",op:52000000,or:"경구",ow:14,ip:57000000,ir:"정맥",iw:14,warn:[{t:"note",x:"* 모체(부형제대조군): 투여전, 투여 후 1 시간"},{t:"note",x:"** 모체(시험물질 투여군): 투여 전, 투여 후 0.5, 1, 2, 6 및 24 시간"},{t:"note",x:"*** 태자: 투여 후 1 hr(총 1 point)"}]},{id:88,num:null,n:"생식독성 : 배태자 본시험(Rabbit)",c:"생식독성",s:"Rabbit",d:"GD6-19",desc:"- 임신암컷 25마리/군, 4군",op:176000000,or:"-",ow:26,ip:193000000,ir:"-",iw:26,warn:[{t:"cost",x:"별도추가 : 투여일이 매일 투여가 아닐 경우"}]},{id:89,num:86,n:"생식독성 : 배태자 TK(Rabbit)",c:"생식독성",s:"Rabbit",d:"-",desc:"- 총 220 point\n- LC/MS/MS",op:100000000,or:"-",ow:29,ip:103000000,ir:"-",iw:29},{id:90,num:87,n:"생식독성 : 태반이행(Rabbit)",c:"생식독성",s:"Rabbit",d:"-",desc:"- 총 12 point\n- LC/MS/MS",op:24000000,or:"-",ow:29,ip:28000000,ir:"-",iw:29},{id:91,num:88,n:"생식독성 : 출생전후/모체기능",c:"생식독성",s:"SD rat",d:"GD6~PND21",desc:"- 암컷 22마리/군, 수컷 60마리\n- 대조군 1, 시험군 3",op:139000000,or:"경구",ow:32,ip:154000000,ir:"정맥",iw:32},{id:92,num:89,n:"항원성 : 아나필락시스 쇼크",c:"항원성",s:"Guinea Pig",d:"수회",desc:"- 5마리/군, 대조군 2, 시험군 3\n- 감작: 2회/주 3주간\n- 야기: 최종감작 14일후 정맥",op:16500000,or:"정맥",ow:12,ip:16500000,ir:"정맥",iw:12},{id:93,num:90,n:"항원성 : 수동피부 아나필락시스",c:"항원성",s:"Guinea Pig",d:"1회",desc:"- 감작용 5마리/군(피내)\n- 야기용 10마리/군(정맥)\n- 대조군 2, 시험군 3",op:16000000,or:"정맥",ow:12,ip:16000000,ir:"정맥",iw:12},{id:94,num:91,n:"항원성 : 피부감작성(Buehler)",c:"항원성",s:"Guinea Pig",d:"수회",desc:"- 대조 5, 시험 10, 양성 5마리\n- 예비시험 포함",op:15000000,or:"첩포",ow:10,ip:15000000,ir:"첩포",iw:10},{id:95,num:92,n:"항원성 : LLNA",c:"항원성",s:"CBA/J mouse",d:"3일",desc:"- LLNA:BrdU:ELISA\n- 암컷 5마리/군, OECD TG 442B",op:15000000,or:"도포",ow:6,ip:15000000,ir:"도포",iw:6},{id:96,num:93,n:"국소독성 : 피부자극",c:"국소독성",s:"Rabbit",d:"단회",desc:"- 6마리\n- 2.5×2.5cm 피부\n- 24,72hr 관찰",op:10000000,or:"도포",ow:5,ip:10000000,ir:"도포",iw:5},{id:97,num:94,n:"국소독성 : 안점막자극",c:"국소독성",s:"Rabbit",d:"단회",desc:"- 9마리(세척군 3)\n- 24,48,72hr 관찰",op:12000000,or:"안구",ow:6,ip:12000000,ir:"안구",iw:6,warn:[{t:"exempt",x:"- 자외부(280~480nm)에서 흡수가 없을시 면제"}]},{id:98,num:95,n:"In vitro 3T3 NRU 광독성",c:"국소독성/광독성",s:"Cell",d:"-",desc:"- 조사/비조사 9농도\n- OECD TG 432",op:6000000,or:"-",ow:8,ip:6000000,ir:"-",iw:8,warn:[{t:"exempt",x:"- 자외부(280~480nm)에서 흡수가 없을시 면제"}]},{id:99,num:96,n:"국소독성 : 광독성시험",c:"국소독성/광독성",s:"Guinea Pig",d:"단회",desc:"- 수컷 5마리/군\n- 280~480nm 흡수 없으면 면제",op:10000000,or:"도포",ow:5,ip:10000000,ir:"도포",iw:5},{id:100,num:97,n:"국소독성 : 광감작성(Harber)",c:"국소독성/광독성",s:"Guinea Pig",d:"단회",desc:"- 수컷 5마리/군\n- 280~480nm 흡수 없으면 면제",op:12000000,or:"도포",ow:9,ip:12000000,ir:"도포",iw:9},{id:101,num:98,n:"발암성 : 랫드",c:"발암성시험",s:"-",d:"-",desc:"- 암수 각각 60마리/군\n- 대조군 1, 시험군 3",op:1230000000,or:"-",ow:"협의",ip:1230000000,ir:"-",iw:"협의",warn:[{t:"pre",x:"* 마우스 발암성시험시 4주DRF, 13주 반복독성시험 수행해야 함."}]},{id:102,num:99,n:"발암성 : 랫드 TK",c:"발암성시험",s:"-",d:"-",desc:"- 랫드 독성동태",op:150000000,or:"-",ow:"협의",ip:150000000,ir:"-",iw:"협의"},{id:103,num:100,n:"발암성 : 마우스",c:"발암성시험",s:"-",d:"-",desc:"- 암수 각각 60마리/군\n- 대조군 1, 시험군 3\n- 4주DRF, 13주 반복독성 수행 필요",op:1200000000,or:"-",ow:"협의",ip:1200000000,ir:"-",iw:"협의"},{id:104,num:101,n:"발암성 : 마우스 TK",c:"발암성시험",s:"-",d:"-",desc:"- 마우스 독성동태",op:20000000,or:"-",ow:"협의",ip:20000000,ir:"-",iw:"협의"}];

const CATS=["전체","조제물분석","단회투여독성","반복투여독성","독성동태","유전독성","안전성약리","생식독성","항원성","국소독성","국소독성/광독성","발암성시험"];
const CC={"조제물분석":"#6366f1","단회투여독성":"#ec4899","반복투여독성":"#2563eb","독성동태":"#7c3aed","유전독성":"#059669","안전성약리":"#d97706","생식독성":"#dc2626","항원성":"#0d9488","국소독성":"#ea580c","국소독성/광독성":"#9333ea","발암성시험":"#475569"};
// OECD price overlay: items where OECD price differs from MFDS {id:{oop:oral,oip:iv}}
const OV={28:{oop:294000000,oip:397000000},60:{oip:99000000},66:{oip:134000000},76:{oop:20000000,oip:20000000},77:{oop:22000000,oip:22000000},85:{oip:97000000},86:{oip:15000000},94:{oip:20200000},100:{oip:15000000}};
// OECD-only items: added for KGLP+OECD standard (mapped by num in D)
// These items replace MFDS pricing for certain Beagle/genotox tests when OECD is selected
// {num_in_D: {oop:oral_oecd, oip:iv_oecd}}
const OE={45:{oop:252000000,oip:258000000},47:{oop:79000000,oip:80000000},48:{oop:92000000,oip:92000000},49:{oop:261000000,oip:264000000},51:{oop:79000000,oip:80000000},52:{oop:92000000,oip:92000000},53:{oop:301000000,oip:301000000},55:{oop:79000000,oip:80000000},56:{oop:92000000,oip:92000000},57:{oop:102000000,oip:102000000},58:{oop:120000000,oip:121000000},59:{oop:383000000,oip:399000000},61:{oop:79000000,oip:80000000},62:{oop:92000000,oip:92000000},63:{oop:102000000,oip:102000000},64:{oop:120000000,oip:121000000},65:{oop:486000000,oip:506000000},67:{oop:79000000,oip:80000000},68:{oop:92000000,oip:92000000},69:{oop:102000000,oip:102000000},70:{oop:120000000,oip:121000000},71:{oop:6500000,oip:6500000},72:{oop:15000000,oip:15000000},73:{oop:18000000,oip:18000000},74:{oop:36000000,oip:36000000},75:{oop:53000000,oip:53000000}};
// === Health Food (개별인정형) Data ===
const HF_INDV=[{id:1,num:1,n:"투여물질의 조제물 분석",fn:"투여물질의 조제물 분석",c:"조제물분석",s:"-",d:"-",desc:"- 조제물분석법 Validation\n- 해당일 조제물에서 상중하 1ml씩 채취하여 분석 실시(HPLC)\n- 균질성, 안전성 및 함량 측정\n- 분석법 및 표준품 의뢰자 제공",p:26000000,w:"6~",gl:["","","건강기능식품 기능성 및 안전성 평가 가이드","투여 조제물의 균질성, 안정성 및 함량을 HPLC 등으로 분석하여 투여량의 정확성 확보"],warn:[{t:"edit",x:"투여물질의 조제물 분석 <견적 시마다 계산하여 수정할 것>"}]},{id:2,num:2,n:"급성 경구독성시험",fn:"급성 경구독성시험 (독성등급법: OECD TG423)",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 독성등급법(TG423)\n- 일반증상, 체중 및 부검 관찰\n- 14일간 관찰",p:2700000,w:7,gl:["OECD TG 423","","식품의약품안전처 고시","독성등급법으로 단회 경구투여 후 14일간 관찰하여 급성독성 프로파일 평가"]},{id:3,num:3,n:"설치류 4주 DRF",fn:"설치류 4주 투여 DRF 시험 (용량결정시험)",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 3",p:14400000,w:8,gl:["OECD TG 407","ICH M3(R2), ICH S4","식품의약품안전처 고시","13주 본시험의 용량 설정을 위한 DRF"]},{id:4,num:4,n:"설치류 13주 반복투여 독성",fn:"설치류 13주 반복 투여 독성시험 (OECD TG 408 반영)",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 10마리/군, 대조군 1, 시험군 3\n- 주요군: 80마리\n\n*TG408 개정 추가*\n1. 호르몬: T4, T3, TSH\n2. 혈액생화학: LDL, HDL\n3. 암컷 성주기 검사",p:92000000,w:27,gl:["OECD TG 408","ICH M3(R2), ICH S4","식품의약품안전처 고시","13주간 반복투여 아만성독성 평가. TG408 개정 반영"],warn:[{t:"cost",x:"*설치류 반복투여 독성 개정 고시 추가 시험"},{t:"cost",x:"* 성호르몬( testosterone, oestradiol, follicle stimulating hormone, luteinizing hormone )은 필요에 따라 측정할 수 있음 : 추가 비용 발생"}]},{id:5,num:5,n:"유전독성: Ames(TG471)",fn:"유전독성시험 : 복귀 돌연변이 (OECD TG471)",c:"유전독성",s:"-",d:"-",desc:"- 5개 균주(TA100,TA1535,TA98,TA1537,WP2uvrA)\n- 복귀돌연변이 집락 수 관찰\n- 예비시험 포함",p:5600000,w:5,gl:["OECD TG 471","ICH S2(R1)","식품의약품안전처 고시","5개 균주 복귀돌연변이시험"],note:"재현성 추가시험 시 +200만원",warn:[{t:"note",x:"* 설치류 반복 투여 회복시험 진행여부"}]},{id:6,num:6,n:"유전독성: 염색체이상(TG473)",fn:"유전독성시험 : 염색체 이상 시험 (OECD TG473)",c:"유전독성",s:"Cell",d:"-",desc:"- CHL 세포\n- 구조/수적 이상 관찰\n- 예비시험 포함",p:13000000,w:9,gl:["OECD TG 473","ICH S2(R1)","식품의약품안전처 고시","CHL 세포 염색체이상시험"],warn:[{t:"cost",x:"- 재현성 확인을 위한 추가시험 진행 시 비용추가"},{t:"cost",x:"(추가금액 2,000,000원)"}]},{id:7,num:7,n:"유전독성: 소핵시험(TG474)",fn:"유전독성시험 : 소핵시험 (OECD TG474)",c:"유전독성",s:"SD rat",d:"-",desc:"- 6마리/군, 총 5군\n- 골수 미성숙 적혈구내 소핵관찰\n- 예비시험 포함",p:15500000,w:9,gl:["OECD TG 474","ICH S2(R1)","식품의약품안전처 고시","설치류 골수 적혈구 소핵시험"]}];
const HF_INDV_CATS=["전체","조제물분석","단회투여독성","반복투여독성","유전독성"];
// === Health Food (프로바이오틱스) Data ===
const HF_PROB=[{id:1,num:1,n:"투여물질의 조제물 분석",fn:"투여물질의 조제물 분석",c:"조제물분석",s:"-",d:"-",desc:"- 조제물분석법 Validation\n- HPLC 분석\n- 균질성, 안전성 및 함량 측정",p:26000000,w:"6~",gl:["","","건강기능식품 기능성 및 안전성 평가 가이드","투여 조제물의 균질성, 안정성 및 함량을 HPLC 등으로 분석"],warn:[{t:"edit",x:"투여물질의 조제물 분석 <견적 시마다 계산하여 수정할 것>"}]},{id:2,num:2,n:"설치류 단회 투여 독성시험",fn:"설치류 단회 투여 독성시험",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 3",p:3200000,w:7,gl:["OECD TG 420/423/425","","식품의약품안전처 고시","단회 경구투여 후 14일간 관찰하여 급성독성 프로파일 평가"]},{id:3,num:3,n:"설치류 4주 DRF",fn:"설치류 4주 투여 DRF 시험 (용량결정시험)",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 3",p:14400000,w:8,gl:["OECD TG 407","ICH M3(R2), ICH S4","식품의약품안전처 고시","13주 본시험의 용량 설정을 위한 DRF"]},{id:4,num:4,n:"설치류 13주 반복투여 독성",fn:"설치류 13주 반복 투여 독성시험 (OECD TG 408 반영)",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 10마리/군, 대조군 1, 시험군 3\n- 주요군: 80마리\n\n*TG408 개정 추가*\n1. 호르몬: T4, T3, TSH\n2. 혈액생화학: LDL, HDL\n3. 암컷 성주기 검사",p:92000000,w:27,gl:["OECD TG 408","ICH M3(R2), ICH S4","식품의약품안전처 고시","13주간 반복투여 아만성독성 평가. TG408 개정 반영"],note:"성호르몬 추가 시 비용 발생",warn:[{t:"cost",x:"*설치류 반복투여 독성 개정 고시 추가 시험"},{t:"cost",x:"* 성호르몬( testosterone, oestradiol, follicle stimulating hormone, luteinizing hormone )은 필요에 따라 측정할 수 있음 : 추가 비용 발생"}]},{id:5,num:5,n:"설치류 13주 반복 4주 회복",fn:"설치류 13주 반복 투여 4주 회복시험 (OECD TG 408 반영)",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 5마리/군, 대조군 1, 시험군 1\n- 회복군: 20마리\n\n*TG408 개정 추가*\n1. 호르몬: T4, T3, TSH\n2. 혈액생화학: LDL, HDL\n3. 암컷 성주기 검사",p:26000000,w:31,gl:["OECD TG 408","ICH M3(R2), ICH S4","식품의약품안전처 고시","본시험 후 4주 회복기 가역성 평가. TG408 개정 반영"],warn:[{t:"cost",x:"* 설치류 반복투여 독성 개정 고시 추가 시험"},{t:"cost",x:"* 성호르몬( testosterone, oestradiol, follicle stimulating hormone, luteinizing hormone )은 필요에 따라 측정할 수 있음 : 추가 비용 발생"}]}];
const HF_PROB_CATS=["전체","조제물분석","단회투여독성","반복투여독성"];
// === Health Food (한시적식품) Data ===
const HF_TEMP=[{id:1,num:1,n:"투여물질의 조제물 분석",fn:"투여물질의 조제물 분석",c:"조제물분석",s:"-",d:"-",desc:"- 조제물분석법 Validation\n- HPLC 분석\n- 균질성, 안전성 및 함량 측정\n- 분석법 및 표준품 의뢰자 제공",p:26000000,w:"6~",gl:["","","건강기능식품 기능성 및 안전성 평가 가이드","투여 조제물의 균질성, 안정성 및 함량을 HPLC 등으로 분석"],warn:[{t:"edit",x:"투여물질의 조제물 분석 <견적 시마다 계산하여 수정할 것>"}]},{id:2,num:2,n:"급성 경구독성시험",fn:"급성 경구독성시험 (독성등급법: OECD TG423)",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 독성등급법(TG423)\n- 일반증상, 체중 및 부검\n- 14일간 관찰",p:2700000,w:7,gl:["OECD TG 423","","식품의약품안전처 고시","독성등급법으로 단회 경구투여 후 14일간 관찰"]},{id:3,num:3,n:"설치류 4주 DRF",fn:"설치류 4주 투여 DRF 시험 (용량결정시험)",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 3",p:14400000,w:8,gl:["OECD TG 407","ICH M3(R2), ICH S4","식품의약품안전처 고시","13주 본시험의 용량 설정을 위한 DRF"]},{id:4,num:4,n:"설치류 13주 반복투여 독성",fn:"설치류 13주 반복 투여 독성시험 (OECD TG 408 반영)",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 10마리/군, 대조군 1, 시험군 3\n- 주요군: 80마리\n\n*TG408 개정 추가*\n1. 호르몬: T4, T3, TSH\n2. 혈액생화학: LDL, HDL\n3. 암컷 성주기 검사",p:92000000,w:27,gl:["OECD TG 408","ICH M3(R2), ICH S4","식품의약품안전처 고시","13주간 반복투여 아만성독성 평가. TG408 개정 반영"],note:"성호르몬 추가 시 비용 발생",warn:[{t:"cost",x:"*설치류 반복투여 독성 개정 고시 추가 시험"},{t:"cost",x:"* 성호르몬( testosterone, oestradiol, follicle stimulating hormone, luteinizing hormone )은 필요에 따라 측정할 수 있음 : 추가 비용 발생"}]},{id:5,num:5,n:"설치류 13주 반복 4주 회복",fn:"설치류 13주 반복 투여 4주 회복시험 (OECD TG 408 반영)",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 5마리/군, 대조군 1, 시험군 1\n- 회복군: 20마리\n\n*TG408 개정 추가*\n1. 호르몬: T4, T3, TSH\n2. 혈액생화학: LDL, HDL\n3. 암컷 성주기 검사",p:26000000,w:31,gl:["OECD TG 408","ICH M3(R2), ICH S4","식품의약품안전처 고시","본시험 후 4주 회복기 가역성 평가. TG408 개정 반영"],warn:[{t:"cost",x:"* 설치류 반복투여 독성 개정 고시 추가 시험"},{t:"cost",x:"* 성호르몬( testosterone, oestradiol, follicle stimulating hormone, luteinizing hormone )은 필요에 따라 측정할 수 있음 : 추가 비용 발생"}]},{id:6,num:6,n:"유전독성: Ames(TG471)",fn:"유전독성시험 : 복귀 돌연변이 (OECD TG471)",c:"유전독성",s:"-",d:"-",desc:"- 5개 균주(TA100,TA1535,TA98,TA1537,WP2uvrA)\n- 복귀돌연변이 집락 수 관찰\n- 예비시험 포함",p:5600000,w:5,gl:["OECD TG 471","ICH S2(R1)","식품의약품안전처 고시","5개 균주 복귀돌연변이시험"],note:"재현성 추가시험 시 +200만원",warn:[{t:"note",x:"* 설치류 반복 투여 회복시험 진행여부"}]},{id:7,num:7,n:"유전독성: 염색체이상(TG473)",fn:"유전독성시험 : 염색체 이상 시험 (OECD TG473)",c:"유전독성",s:"Cell",d:"-",desc:"- CHL 세포\n- 구조/수적 이상 관찰\n- 예비시험 포함",p:13000000,w:9,gl:["OECD TG 473","ICH S2(R1)","식품의약품안전처 고시","CHL 세포 염색체이상시험"],warn:[{t:"cost",x:"- 재현성 확인을 위한 추가시험 진행 시 비용추가"},{t:"cost",x:"(추가금액 2,000,000원)"}]},{id:8,num:8,n:"유전독성: 소핵시험(TG474)",fn:"유전독성시험 : 소핵시험 (OECD TG474)",c:"유전독성",s:"SD rat",d:"-",desc:"- 6마리/군, 총 5군\n- 골수 미성숙 적혈구내 소핵관찰\n- 예비시험 포함",p:15500000,w:9,gl:["OECD TG 474","ICH S2(R1)","식품의약품안전처 고시","설치류 골수 적혈구 소핵시험"]}];
const HF_TEMP_CATS=["전체","조제물분석","단회투여독성","반복투여독성","유전독성"];
// === Combination Drug (복합제) Data ===
// p2/p3/p4 = 2종/3종/4종 가격
const COMBO=[
{id:1,num:1,n:"조제물분석",fn:"투여물질의 조제물 분석 (Full Validation)",c:"조제물분석",s:"-",d:"-",desc:"- Full Validation (균질성, 안전성 및 함량)\n- 개별분석→동시분석 가능여부 확인\n- 표준품, 분석법 의뢰자 제공(HPLC)",p2:20000000,p3:30000000,p4:40000000,w:"6~",gl:["","","독성시험기준 제4조","복합제 각 성분별 Full Validation"],note:"종수×1,000만원",warn:[{t:"edit",x:"투여물질의 조제물 분석 <견적 시마다 계산하여 수정할 것>"},{t:"consult",x:"- 개별분석 → 동시분석 가능여부 확인 후 수정 (금액동일)"}]},
{id:2,num:2,n:"함량분석",fn:"투여물질의 함량 분석",c:"조제물분석",s:"-",d:"-",desc:"- 4주 DRF: 2회\n- 13주 반복시험: 3회",p2:10000000,p3:15000000,p4:20000000,w:"-",gl:["","","독성시험기준 제4조","4주 DRF 2회 + 13주 반복시험 3회 함량 분석"],note:"종수×500만원"},
{id:3,num:3,n:"설치류 4주 DRF",fn:"설치류 4주 투여 DRF 시험",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 5마리/군\n- 2종: 대조1+복합3+단일2 (6군)\n- 3종: 대조1+복합3+단일3 (7군)\n- 4종: 대조1+복합3+단일4 (8군)\n\n1. 일반증상, 체중측정\n2. 뇨/안검사, 사료/음용수 섭취량\n3. 부검/장기중량, 혈액학/생화학\n4. 이상장기 고정\n* 예비시험 포함(non-GLP)",p2:28000000,p3:33000000,p4:40000000,w:10,gl:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","복합제+단일제 군 구성 DRF"],warn:[{t:"note",x:"* 설치류 예비시험 포함 (non-GLP)"}]},
{id:4,num:4,n:"설치류 13주 반복투여",fn:"설치류 13주 반복 투여 독성시험",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 10마리/군\n- 2종: 대조1+복합3+단일2 (6군)\n- 3종: 대조1+복합3+단일3 (7군)\n- 4종: 대조1+복합3+단일4 (8군)\n\n1. 일반증상, 체중\n2. 뇨/안검사, 사료/음용수\n3. 부검/장기중량, 혈액학/생화학/응고\n4. 조직병리: 대조, 단일제, 복합최고용량\n   (이상장기→모든 군)",p2:165000000,p3:199000000,p4:241000000,w:32,gl:["OECD TG 408","ICH M3(R2), ICH S4","독성시험기준 제6조","복합제 vs 단일제 비교 아만성독성 평가"],warn:[{t:"note",x:"4. 조직병리 검사 ; 대조군, 단일제, 복합제 최고용량군에 대해서 실시, 단, 이상장기는 모든군에서 실시"}]},
{id:5,num:5,n:"설치류 13주 4주 회복",fn:"설치류 13주 반복 투여 4주 회복시험",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 5마리/군\n- 2종: 대조1+복합1+단일2 (4군)\n- 3종: 대조1+복합1+단일3 (5군)\n- 4종: 대조1+복합1+단일4 (6군)",p2:56000000,p3:67000000,p4:82000000,w:36,gl:["OECD TG 408","ICH M3(R2), ICH S4","독성시험기준 제6조","본시험 후 4주 회복기 가역성 평가"]},
{id:6,num:6,n:"TK 6pt (채혈만)",fn:"설치류 13주 독성동태 채혈시험 - 6 point",c:"독성동태(TK)",s:"SD rat",d:"13주",desc:"- 암수 각각 6마리/군 (3마리씩 교차채혈)\n- 2종: 총 396pt\n- 3종: 총 468pt\n- 4종: 총 540pt\n- 채혈→의뢰자 검체 전달(2회)",p2:56000000,p3:87000000,p4:99000000,w:16,gl:["","ICH S3A","독성시험기준 제6조","6pt 교차채혈 후 검체 전달"]},
{id:7,num:7,n:"TK 6pt (채혈+분석)",fn:"설치류 13주 독성동태 - 6 point 채혈 및 분석",c:"독성동태(TK)",s:"SD rat",d:"13주",desc:"- 암수 각각 6마리/군 (3마리씩 교차채혈)\n- 2종: 총 396pt\n- 3종: 총 468pt\n- 4종: 총 540pt\n\n1. 생체시료 개별/동시분석 검증\n2. validation\n3. LC/MS/MS (ISR 10%)",p2:161000000,p3:213000000,p4:263000000,w:16,gl:["","ICH S3A","독성시험기준 제6조","6pt 교차채혈+LC/MS/MS Full Validation"],note:"분석법 의뢰자 제공"},
{id:8,num:8,n:"TK 8pt (채혈만)",fn:"설치류 13주 독성동태 채혈시험 - 8 point",c:"독성동태(TK)",s:"SD rat",d:"13주",desc:"- 암수 각각 6마리/군 (3마리씩 교차채혈)\n- 2종: 총 516pt\n- 3종: 총 612pt\n- 4종: 총 708pt\n- 채혈→의뢰자 검체 전달(2회)",p2:60000000,p3:92000000,p4:105000000,w:16,gl:["","ICH S3A","독성시험기준 제6조","8pt 교차채혈 후 검체 전달"]},
{id:9,num:9,n:"TK 8pt (채혈+분석)",fn:"설치류 13주 독성동태 - 8 point 채혈 및 분석",c:"독성동태(TK)",s:"SD rat",d:"13주",desc:"- 암수 각각 6마리/군 (3마리씩 교차채혈)\n- 2종: 총 516pt\n- 3종: 총 612pt\n- 4종: 총 708pt\n\n1. 생체시료 개별/동시분석 검증\n2. validation\n3. LC/MS/MS (ISR 10%)",p2:186000000,p3:246000000,p4:307000000,w:16,gl:["","ICH S3A","독성시험기준 제6조","8pt 교차채혈+LC/MS/MS Full Validation"],note:"분석법 의뢰자 제공"}
];
const COMBO_CATS=["전체","조제물분석","반복투여독성","독성동태(TK)"];
// === Vaccine Data ===
const VACCINE=[
{id:1,num:1,n:"설치류 4주(3회) 반복투여 독성",fn:"설치류 4주(1회/2주, 총 3회) 반복 투여 독성시험",c:"반복투여독성",s:"SD rat",d:"4주(3회)",desc:"- 암수 각각 10마리/군, 총 2군\n- 대조군 1, 백신군 1\n- 1회/2주, 총 3회 투여\n\n1. 체중, 일반증상\n2. 사료/음용수 섭취량\n3. 뇨/안검사\n4. 부검/장기중량, 혈액학, 생화학, 응고검사\n5. 조직병리 검사",p:56000000,w:21,gl:["OECD TG 407","ICH S6(R1), ICH M3(R2)","독성시험기준 제6조","백신 반복투여(1회/2주, 총3회) 독성시험. 2군(대조+백신)"],note:"군 구성/투여횟수 확인 후 금액 조정 가능",warn:[{t:"consult",x:"→ 군 구성 여부 확인 후 금액 조정"},{t:"consult",x:"1. 1회/2주, 총 3회투여 → 확인 후 금액 조정"}]},
{id:2,num:2,n:"설치류 4주(3회) 4주 회복",fn:"설치류 4주(1회/2주, 총 3회) 반복 투여 4주 회복시험",c:"반복투여독성",s:"SD rat",d:"4주(3회)",desc:"- 암수 각각 5마리/군, 총 2군\n- 대조군 1, 백신군 1",p:30800000,w:25,gl:["OECD TG 407","ICH S6(R1), ICH M3(R2)","독성시험기준 제6조","백신 본시험 후 4주 회복기 가역성 평가"]},
{id:3,num:3,n:"항체형성 확인시험",fn:"설치류 4주(1회/2주, 총 3회) 반복 투여 항체형성 확인시험",c:"면역원성",s:"SD rat",d:"4주(3회)",desc:"- 암수 각각 5마리/군, 총 2군\n- 대조군 1, 백신군 1\n\n채혈 시점:\n1. 투여 전\n2. 2차 투여 전\n3. 3차 투여 전\n4. 종료 후 2주\n5. 종료 후 4주\n\n- 혈액시료 의뢰자 전달",p:10800000,w:12,gl:["","ICH S6(R1)","독성시험기준 제6조","투여 전/중/후 채혈 항체 형성 확인. 혈액시료 의뢰자 전달"]}
];
const VACCINE_CATS=["전체","반복투여독성","면역원성"];
// === Screening Data ===
const SCREEN=[
{id:1,num:1,n:"단회투여 독성 스크리닝",fn:"설치류 단회 투여 독성시험 Screening",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 시험물질 1종\n- 고정용량방법(OECD TG 420)\n- 투여량: 5, 50, 300, 2000 mg/kg",p:2500000,w:5,gl:["OECD TG 420","","","고정용량방법(TG420)으로 단회투여 급성독성 스크리닝"]},
{id:2,num:2,n:"2주 반복독성 스크리닝",fn:"설치류 2주 반복 독성 Screening",c:"반복투여독성",s:"SD rat",d:"2주",desc:"- 시험물질 1종\n- 암수 각각 3마리/군\n- 대조군 1, 시험군 3\n\n- 조직병리: 주요 5장기\n  (뇌, 신장, 심장, 간, 폐장)",p:18000000,w:5,gl:["","","","신속한 독성 및 표적장기 확인. 주요 5장기 조직병리"],note:"관심장기 추가 시 비용 발생",warn:[{t:"cost",x:"* 의뢰자가 요청하는 관심장기 추가시 비용 발생"}]},
{id:3,num:3,n:"복귀돌연변이 스크리닝",fn:"복귀 돌연변이시험 Screening",c:"유전독성",s:"Cell",d:"-",desc:"- 시험물질 1종\n- 대장균 1균, 살모넬라균 4균\n- 9개 농도군(음성/양성대조군 포함)\n- 농도군당 2개 plate (총 180 plates)",p:3000000,w:3,gl:["OECD TG 471","ICH S2(R1)","","대장균+살모넬라균, 9개 농도군, 총 180 plates"]},
{id:4,num:4,n:"염색체이상 스크리닝",fn:"염색체 이상 시험 Screening",c:"유전독성",s:"Cell",d:"-",desc:"- 시험물질 1종\n- 햄스터 폐 세포\n- 용량결정시험 포함\n- 6+S / 6-S / 24-S",p:5000000,w:7,gl:["OECD TG 473","ICH S2(R1)","","햄스터 폐 세포, 용량결정시험 포함"]},
{id:5,num:5,n:"소핵시험 스크리닝 (in vivo)",fn:"소핵 시험 Screening",c:"유전독성",s:"ICR mouse",d:"-",desc:"- 시험물질 1종\n- 수컷 ICR mouse 4마리/6군\n  (음성/양성대조군 포함)\n- LD50 자료 제공 필요",p:6000000,w:7,gl:["OECD TG 474","ICH S2(R1)","","수컷 ICR mouse 4마리/6군"]},
{id:6,num:6,n:"소핵시험 스크리닝 (in vitro)",fn:"In vitro 소핵 시험 Screening",c:"유전독성",s:"Cell",d:"-",desc:"- 시험물질 1종\n- +cyto-B 처리\n- 3+S, 3-S, 24-S\n- 이핵세포 1000개 소핵 판별",p:6000000,w:7,gl:["OECD TG 487","ICH S2(R1)","","+cyto-B 처리, 이핵세포 소핵 판별"]},
{id:7,num:7,n:"세포독성 스크리닝",fn:"In vitro Cytotoxicity Screening",c:"세포독성",s:"In vitro",d:"-",desc:"- 시험물질 1종\n- 세포: L-929\n- ISO 10993-5, Part 5\n- MTT assay",p:4300000,w:8,gl:["","","ISO 10993-5","L-929 세포, MTT assay"]},
{id:8,num:8,n:"hERG 스크리닝",fn:"안전성약리 In vitro hERG Assay Screening",c:"안전성약리",s:"Cell",d:"-",desc:"- 시험물질 1종\n- CHO-hERG-Duo cells\n- 3 dose군, 부형제대조군 1, E4031군 1\n- hERG channel current 측정",p:6000000,w:3,gl:["","ICH S7B","","CHO-hERG-Duo cells, hERG channel current 측정"]}
];
const SCREEN_CATS=["전체","단회투여독성","반복투여독성","유전독성","세포독성","안전성약리"];
// === Cardiovascular Screening Data ===
const CV_SCREEN=[
{id:1,num:1,n:"hERG screening",fn:"안전성약리 In vitro hERG Screening Assay (Manual Patch Clamp)",c:"이온채널 스크리닝",s:"Cell",d:"-",desc:"- 시험물질 1종\n- CHO-hERG-Duo cells\n- 3 dose군, 부형제대조군 1, E4031군 1\n- hERG channel current 측정",p:3000000,w:"2-3",gl:["","ICH S7B","","CHO-hERG-Duo cells, manual patch clamp hERG측정"],note:"raw data 전달 기준",warn:[{t:"note",x:"* 결과 raw data 전달 기준"}]},
{id:2,num:2,n:"Cav1.2 screening",fn:"안전성약리 In vitro Cav1.2 Ion Channel Screening Assay (Manual Patch Clamp)",c:"이온채널 스크리닝",s:"Cell",d:"-",desc:"- 시험물질 1종\n- HEK-293\n- 3 dose군, 양성대조군 1\n- CaV1.2 발현 유도 (Tetracycline)",p:3000000,w:"2-3",gl:["","ICH S7B","","HEK-293, CaV1.2 발현 유도 후 patch clamp"],note:"raw data 전달 기준",warn:[{t:"note",x:"* 결과 raw data 전달 기준"}]},
{id:3,num:3,n:"Nav1.5 screening",fn:"안전성약리 In vitro Nav1.5 Ion Channel Screening Assay (Manual Patch Clamp)",c:"이온채널 스크리닝",s:"Cell",d:"-",desc:"- 시험물질 1종\n- CHO cell\n- 3 dose군, 양성대조군 1\n- Peak/Late NaV1.5 current 평가",p:3000000,w:"2-3",gl:["","ICH S7B","","CHO cell, Peak/Late NaV1.5 current 평가"],note:"raw data 전달 기준",warn:[{t:"note",x:"* 결과 raw data 전달 기준"}]},
{id:4,num:4,n:"MEA (hiPSC-CM)",fn:"안전성약리 In vitro MEA using hiPSC-Cardiomyocytes (GLP)",c:"MEA",s:"Cell",d:"-",desc:"- 시험물질 1종\n- 2개 세포주: 넥셀(국내), 후지필름 CDI(일본)\n- 부형제대조군 1, 시험군 3\n- 측정: FPD, BPM/ISI, dv/dtmax",p:40000000,w:"4-5",gl:["","ICH S7B","CiPA","2개 세포주, MEA로 FPD/BPM/dv·dtmax 측정"],note:"GLP · 보고서 작성 기준",warn:[{t:"note",x:"* 보고서 작성 기준"}]},
{id:5,num:5,n:"비글 예비시험",fn:"안전성약리 투여 용량 확인 예비시험 (비글)",c:"예비시험",s:"Beagle dog",d:"1-2회",desc:"- 비글 수컷 2마리\n- capsule 투여 2 dose\n- hERG 시험 정보 제공 필요",p:10000000,w:"3-4",gl:["","ICH S7A","","비글 수컷 2마리, capsule 2 dose"],warn:[{t:"note",x:"*허그시험에 대한 정보 제공"}]},
{id:6,num:6,n:"Telemetry",fn:"안전성약리 Telemetry Assay (비글)",c:"Telemetry",s:"Beagle dog",d:"단회",desc:"- 시험군 2 (대조군 없이)\n- 부형제: 투여 전 2-3시간 자료 활용",p:50000000,w:12,gl:["","ICH S7A","","비글 Telemetry, 시험군 2"]}
];
const CV_SCREEN_CATS=["전체","이온채널 스크리닝","MEA","예비시험","Telemetry"];
// === Medical Device (의료기기 생물학적 안전성) Data ===
const MD_BIO=[
{id:1,num:1,n:"세포독성-용출물",fn:"세포독성시험 - 용출물 시험",c:"세포독성",s:"Cell",d:"-",desc:"- BALB/3T3 또는 L-929\n- 5% DMEM 용출\n- 대조물질: HDPE, ZDEC\n- 7 dose 진행",p:3000000,w:6,gl:["ISO 10993-5","","","BALB/3T3 또는 L-929, 배양액 용출, 7dose"]},
{id:2,num:2,n:"세포독성-직접접촉",fn:"세포독성시험 - 직접 접촉법",c:"세포독성",s:"Cell",d:"-",desc:"- BALB/3T3 또는 L-929\n- 배양 세포에 직접 노출\n- 대조물질: HDPE, ZDEC",p:3000000,w:6,gl:["ISO 10993-5","","","배양세포 직접 노출"]},
{id:3,num:3,n:"세포독성-한천확산",fn:"세포독성시험 - 한천 확산 시험 (간접접촉법)",c:"세포독성",s:"Cell",d:"-",desc:"- BALB/3T3 또는 L-929\n- 한천 평판 (2X DMEM + 3% agar)\n- 대조물질: HDPE, ZDEC",p:3000000,w:6,gl:["ISO 10993-5","","","한천 위 배양세포 간접 노출"]},
{id:4,num:4,n:"피부감작성(GPMT)",fn:"피부 감작성시험 (GPMT)",c:"감작성/자극성",s:"Guinea Pig",d:"단회",desc:"- 수컷 5마리/군(대조), 10마리/군(시험)\n- 음성대조 2, 시험군 2\n- 극성/비극성 용출 2조건\n\n1) 1차 유도: 피내투여\n2) SDS 전처치\n3) 2차 유도: 폐쇄첩포\n4) 유발: 폐쇄첩포\n5) 피부반응평가",p:15000000,w:12,gl:["ISO 10993-10","","","GPMT법, 극성/비극성 2조건"]},
{id:5,num:5,n:"피내반응시험",fn:"토끼를 이용한 피내(진피내) 반응시험",c:"감작성/자극성",s:"Rabbit",d:"단회",desc:"- 3마리\n- 극성/비극성 용출 2조건\n- 피부반응: 투여 직후, 24, 48, 72h",p:3000000,w:8,gl:["ISO 10993-23","","","토끼 3마리, 극성/비극성 2조건"]},
{id:6,num:6,n:"피부자극시험",fn:"토끼를 이용한 피부자극시험",c:"감작성/자극성",s:"Rabbit",d:"단회",desc:"- 3마리/군, 2군\n- 시험검체 2.5×2.5cm/0.5ml\n- 1회 4시간 유지\n- 피부반응: 1, 24, 48, 72h",p:5000000,w:12,gl:["ISO 10993-23","","","토끼 3마리/군, 극성/비극성 2조건, 4h 유지"]},
{id:7,num:7,n:"안자극시험",fn:"토끼를 이용한 안자극시험",c:"감작성/자극성",s:"Rabbit",d:"단회",desc:"- NZW rabbit 수컷 2~3kg\n- 3마리/군, 2군 (극성/비극성)\n- 좌안: 시험검체, 우안: 공시험액\n- 안반응: 1, 24, 48, 72h",p:15000000,w:8,gl:["ISO 10993-23","","","NZW rabbit 3마리/군 2군"]},
{id:8,num:8,n:"구강점막 자극성",fn:"구강 점막 자극성 시험",c:"감작성/자극성",s:"Syrian Hamster",d:"5회/일",desc:"- 수컷, 3마리/군, 4군 (총 12마리)\n- 볼주머니에 적용 (5분 이상)\n- 급성: 4시간 반복 (5회/일)\n- 볼주머니 육안관찰 + 조직병리",p:14000000,w:8,gl:["ISO 10993-23","","","Syrian Hamster 볼주머니 적용"]},
{id:9,num:9,n:"복귀돌연변이",fn:"유전독성시험: 복귀 돌연변이",c:"유전독성",s:"균",d:"-",desc:"- 극성/비극성 용출 2조건\n- 대장균 1균, 살모넬라균 4균\n- 돌연변이 집락 관찰",p:3500000,w:8,gl:["ISO 10993-3, 10993-33","OECD TG 471","","5균주 복귀돌연변이, 2조건"],note:"독성 시 비용/기간 추가",warn:[{t:"cost",x:"* 독성이 있는 경우, 확인이 필요하며 비용 및 기간 추가됨"}]},
{id:10,num:10,n:"염색체이상",fn:"유전독성시험: 염색체 이상 시험",c:"유전독성",s:"Cell",d:"-",desc:"- 배양액 용출 2조건\n- 햄스터 폐 세포\n- 구조/수적 이상 관찰",p:8000000,w:10,gl:["ISO 10993-3, 10993-33","OECD TG 473","","햄스터 폐 세포, 용출 2조건"],note:"독성 시 비용/기간 추가",warn:[{t:"cost",x:"* 독성이 있는 경우, 확인이 필요하며 비용 및 기간 추가됨"}]},
{id:11,num:11,n:"소핵시험",fn:"유전독성시험: 소핵시험",c:"유전독성",s:"ICR mouse",d:"-",desc:"- 6마리/군, 5군\n- 음성대조 2, 시험군 2, 양성대조 1\n- 예비시험 포함",p:8000000,w:12,gl:["ISO 10993-2, 10993-33","OECD TG 474","","ICR mouse 6마리/군 5군"]},
{id:12,num:12,n:"MLA(TG490)",fn:"유전독성시험: MLA (OECD TG490)",c:"유전독성",s:"Cell",d:"-",desc:"- Mouse lymphoma L5178Y\n- 예비시험\n- 3+S, 3-S, 24-S\n- 8 dose, 음성/양성대조군",p:36000000,w:14,gl:["","OECD TG 490","","MLA 돌연변이율 산출"],note:"봉합사 등 염색체이상 대신 진행"},
{id:13,num:13,n:"급성전신독성",fn:"급성전신독성시험",c:"전신독성",s:"ICR mouse",d:"-",desc:"- 암컷 5마리/군, 4군\n- 용매대조 2, 시험군 2\n- 극성/비극성 2조건\n- 1회 투여 후 3일간 관찰",p:2500000,w:7,gl:["ISO 10993-11","","","ICR mouse 5마리/군, 3일간 관찰"]},
{id:14,num:14,n:"아급성시험(4주)",fn:"SD 랫드를 이용한 아급성시험",c:"전신독성",s:"SD rat",d:"단회",desc:"- 2군, 암수 각각 5~6마리/군\n- 정맥(1회/일, 14일간)\n- 복강(3일 간격, 2주)\n\n관찰(4주간):\n혈액학/생화학, 안검사, 장기중량, 조직병리",p:35000000,w:24,gl:["ISO 10993-11","","","SD rat 2군, 4주 관찰"]},
{id:15,num:15,n:"아만성시험(13주)",fn:"SD 랫드를 이용한 아만성시험",c:"전신독성",s:"SD rat",d:"단회",desc:"- 2군, 암수 각각 10마리 이상/군\n- 정맥(1회/일, 28일간)\n- 복강(3일 간격, 2주 이상)\n\n관찰(13주간):\n요검사, 체온, 혈액학/생화학, 안검사, 장기중량, 조직병리",p:60000000,w:30,gl:["ISO 10993-11","","","SD rat 2군, 13주 관찰"]},
{id:16,num:16,n:"이식시험",fn:"SD 랫드를 이용한 이식 시험",c:"이식시험",s:"SD rat",d:"단회",desc:"- 비흡수성: 최대 13주, 1 point 부검\n- 흡수성: 3-4 point 부검\n- 랫드: 1 point 당 6마리 (12 site)\n- 토끼: 1 point 당 4마리 (14 site)\n- 조직병리",p:44000000,w:60,gl:["ISO 10993-6","","","시험물질 직접 이식, 관찰기간 상이"],note:"관찰기간/부검 point 추가 시 금액추가"},
{id:17,num:17,n:"발열성(엔도톡신)",fn:"발열성시험 (엔도톡신)",c:"기타",s:"In vitro",d:"-",desc:"- 비색법 (흡광도 측정)\n- USP, KP 기준",p:3000000,w:8,gl:["ISO 10993-11, 10993-12","","","비색법, USP/KP 기준"]},
{id:18,num:18,n:"혈액적합성",fn:"혈액적합성 시험",c:"기타",s:"Rabbit",d:"-",desc:"- NZW rabbits\n- 음성대조군, 시험군, 양성대조군 총 3군",p:3500000,w:8,gl:["ISO 10993-4","","","NZW rabbit, 3군"]}
];
const MD_BIO_CATS=["전체","세포독성","감작성/자극성","유전독성","전신독성","이식시험","기타"];
// === Cosmetics - Alternative (화장품 대체법) ===
const COS_ALT=[
{id:1,num:1,n:"단회투여 독성",fn:"설치류 단회 투여 독성시험 (독성등급법/고정용량법)",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 예비시험 포함\n- OECD 423 또는 420에 의해 진행",p:3200000,w:7,gl:["OECD TG 423/420","","","TG423/420, 예비시험 포함"]},
{id:2,num:2,n:"Ames(TG471)",fn:"유전독성시험: 복귀 돌연변이 (OECD TG471)",c:"유전독성",s:"-",d:"-",desc:"- 5균주(TA100,TA1535,TA98,TA1537,WP2uvrA)\n- 복귀돌연변이 집락 수 관찰\n- 예비시험 포함",p:6500000,w:5,gl:["OECD TG 471","","","5개 균주, 예비시험 포함"],note:"양성 시 재현시험 +200만",warn:[{t:"cost",x:"* 결과 양성 판정 시, 재현시험 진행해야 함."},{t:"cost",x:"(추가금액 2,000,000원)"}]},
{id:3,num:3,n:"염색체이상(TG473)",fn:"유전독성시험: 염색체 이상 시험 (OECD TG473)",c:"유전독성",s:"Cell",d:"-",desc:"- CHL 세포\n- 구조/수적 이상 관찰\n- 예비시험 포함",p:15000000,w:9,gl:["OECD TG 473","","","CHL 세포, 예비시험 포함"]},
{id:4,num:4,n:"소핵시험(TG474)",fn:"유전독성시험: 소핵시험 (OECD TG474)",c:"유전독성",s:"SD rat",d:"-",desc:"- 6마리/군, 총 5군\n- 골수 미성숙 적혈구내 소핵관찰\n- 예비시험 포함",p:18000000,w:9,gl:["OECD TG 474","","","6마리/군 5군, 예비시험 포함"]},
{id:5,num:5,n:"피부자극(RhE)",fn:"1차 피부자극시험: RhE model (OECD TG439)",c:"피부자극/감작",s:"3D tissue",d:"-",desc:"- EpiDerm™ (MatTek)\n- 조직 입고: 4주 소요 (사전 주문)",p:11000000,w:6,gl:["OECD TG 439","","","EpiDerm™, 조직 입고 4주"],warn:[{t:"lead",x:"-  조직 입고: 4 주 소요(사전 주문 필요)"}]},
{id:6,num:6,n:"안점막자극(RhCE)",fn:"안점막자극시험: RhCE model (OECD TG492)",c:"안자극",s:"3D tissue",d:"-",desc:"- EpiOcular™ (MatTek)\n- 조직 입고: 4주 소요 (사전 주문)",p:11000000,w:6,gl:["OECD TG 492","","","EpiOcular™, 조직 입고 4주"],warn:[{t:"lead",x:"-  조직 입고: 4 주 소요(사전 주문 필요)"}]},
{id:7,num:7,n:"피부감작(LLNA)",fn:"피부감작성시험 LLNA: BrdU-ELISA (OECD TG442B)",c:"피부자극/감작",s:"CBA/J mouse",d:"3일간",desc:"- 암컷 5마리/군\n- 대조1, 시험3, 양성대조1\n- 2회/일, 3일간 도포\n- 용량결정시험/본시험",p:13000000,w:6,gl:["OECD TG 442B","","","암컷 5마리/군, 용량결정/본시험"]},
{id:8,num:8,n:"광독성(3T3 NRU)",fn:"광독성시험 In vitro 3T3 NRU (OECD TG432)",c:"광독성/광감작",s:"Cell",d:"단회",desc:"- 조사/비조사군, 각 9농도\n- 용량결정시험/본시험",p:6000000,w:8,gl:["OECD TG 432","","","조사/비조사군, 9농도"]},
{id:9,num:9,n:"광감작(Harber)",fn:"광감작성시험 Harber법 (동물이용)",c:"광독성/광감작",s:"Guinea Pig",d:"단회",desc:"- 수컷 5마리/군\n- 대조1, 시험1, 양성대조1\n- UV 280~480nm 흡수 없을 시 면제",p:16000000,w:7,gl:["","","","수컷 5마리/군, UV 흡수시 진행"],warn:[{t:"exempt",x:"- 자외부(280~480nm)에서 흡수가 없을시 면제"}]}
];
const COS_ALT_CATS=["전체","단회투여독성","유전독성","피부자극/감작","안자극","광독성/광감작"];
// === Cosmetics - Stem Cell (화장품 줄기세포배양액) ===
const COS_STEM=[
{id:1,num:1,n:"단회투여(경구)",fn:"설치류 단회 투여 독성시험 (경구)",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 독성등급법 또는 고정용량법\n- 예비시험 포함",p:3200000,w:7,gl:["OECD TG 423/420","","","TG423/420, 경구"]},
{id:2,num:2,n:"단회투여(경피)",fn:"설치류 단회 투여 독성시험 (경피)",c:"단회투여독성",s:"SD rat",d:"1회",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 3",p:4600000,w:7,gl:["","","","경피투여, 암수 5마리/군"]},
{id:3,num:3,n:"4주 DRF(경피)",fn:"설치류 4주 투여 DRF 시험 (경피)",c:"반복투여독성",s:"SD rat",d:"4주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 3",p:28000000,w:8,gl:["OECD TG 407","","","경피투여 DRF"]},
{id:4,num:4,n:"13주 반복(경피)",fn:"설치류 13주 반복 투여 독성시험 (경피)",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 10마리/군\n- 대조군 1, 시험군 3",p:142000000,w:31,gl:["OECD TG 408","","","13주 경피 반복투여"]},
{id:5,num:5,n:"13주 회복시험",fn:"설치류 13주 반복 투여 회복시험",c:"반복투여독성",s:"SD rat",d:"13주",desc:"- 암수 각각 5마리/군\n- 대조군 1, 시험군 1",p:39000000,w:35,gl:["OECD TG 408","","","회복기 가역성 평가"]},
{id:6,num:6,n:"Ames(TG471)",fn:"유전독성시험: 복귀 돌연변이 (OECD TG471)",c:"유전독성",s:"-",d:"-",desc:"- 5균주\n- 예비시험 포함",p:6500000,w:5,gl:["OECD TG 471","","","5개 균주"],note:"양성 시 재현시험 +200만",warn:[{t:"cost",x:"* 결과 양성 판정 시, 재현시험 진행해야 함."},{t:"cost",x:"(추가금액 2,000,000원)"}]},
{id:7,num:7,n:"염색체이상(TG473)",fn:"유전독성시험: 염색체 이상 시험 (OECD TG473)",c:"유전독성",s:"Cell",d:"-",desc:"- CHL 세포\n- 예비시험 포함",p:15000000,w:9,gl:["OECD TG 473","","","CHL 세포"]},
{id:8,num:8,n:"소핵시험(TG474)",fn:"유전독성시험: 소핵시험 (OECD TG474)",c:"유전독성",s:"SD rat",d:"-",desc:"- 6마리/군, 총 5군\n- 예비시험 포함",p:18000000,w:9,gl:["OECD TG 474","","","6마리/군 5군"]},
{id:9,num:9,n:"광감작(Harber)",fn:"광감작성시험 Harber법 (동물이용)",c:"광독성/광감작",s:"Guinea Pig",d:"단회",desc:"- 수컷 5마리/군\n- 대조1, 시험1, 양성대조1\n- UV 280~480nm 흡수 없을 시 면제",p:16000000,w:7,gl:["","","","수컷 5마리/군"],warn:[{t:"exempt",x:"- 자외부(280~480nm)에서 흡수가 없을시 면제"}]},
{id:10,num:10,n:"피부감작(LLNA)",fn:"피부감작성시험 LLNA: BrdU-ELISA (OECD TG442B)",c:"피부자극/감작",s:"CBA/J mouse",d:"3일간",desc:"- 암컷 5마리/군\n- 대조1, 시험3, 양성대조1\n- 2회/일, 3일간 도포",p:13000000,w:6,gl:["OECD TG 442B","","","암컷 5마리/군"]},
{id:11,num:11,n:"피부자극(RhE)",fn:"1차 피부자극시험: RhE model (OECD TG439)",c:"피부자극/감작",s:"3D tissue",d:"-",desc:"- EpiDerm™ (MatTek)\n- 조직 입고: 4주 소요",p:11000000,w:6,gl:["OECD TG 439","","","EpiDerm™"],warn:[{t:"lead",x:"-  조직 입고: 4 주 소요(사전 주문 필요)"}]},
{id:12,num:12,n:"안점막자극(RhCE)",fn:"안점막자극시험: RhCE model (OECD TG492)",c:"안자극",s:"3D tissue",d:"-",desc:"- EpiOcular™ (MatTek)\n- 조직 입고: 4주 소요",p:11000000,w:6,gl:["OECD TG 492","","","EpiOcular™"],warn:[{t:"lead",x:"-  조직 입고: 4 주 소요(사전 주문 필요)"}]}
];
const COS_STEM_CATS=["전체","단회투여독성","반복투여독성","유전독성","피부자극/감작","안자극","광독성/광감작"];
// === Cell Therapy (세포치료제) ===
const CELL_TX=[
{id:1,num:1,n:"누드마우스 단회 13주",fn:"누드마우스 단회 투여 후 13주 관찰 독성시험",c:"단회독성",s:"BALB/c nude mice",d:"1회",desc:"- 암수 각각 10마리/군, 대조1+시험3\n- 세포투여, 단회 투여 후 13주 관찰\n- 일반증상, 체중, 사료섭취량, 뇨/안검사\n- 부검: 장기중량, 혈액학, 생화학, 조직병리",p:135000000,w:31,gl:["","","","뇌내 투여, 13주 관찰"],warn:[{t:"consult",x:"1. 세포투여 : 투여량 의뢰자와 협의하여 결정"},{t:"note",x:"- 조직병리 : 투여부위 포함(국소내성)하여 대주곤 및 고용량 투여군에 대해서 실시, 단, 이상장기에 대해서는 모든군에서 실시"}]},
{id:2,num:2,n:"종양원성 26주",fn:"누드마우스 단회 투여 후 26주 종양원성 시험",c:"종양원성",s:"BALB/c nude mice",d:"단회",desc:"- 암수 각각 15마리/군, 대조1+양성대조1+시험1\n- 3주간 총 4회 투여 후 26주 관찰\n- 양성대조군 cell: 켐온 배양",p:145000000,w:46,gl:["","","","26주 종양원성 관찰"],warn:[{t:"consult",x:"1. 세포투여 : 투여량 의뢰자와 협의하여 결정"},{t:"note",x:"- 조직병리 : 투여부위 포함(국소내성)하여 대주곤 및 고용량 투여군에 대해서 실시, 단, 이상장기에 대해서는 모든군에서 실시"}]},
{id:3,num:3,n:"종양원성 52주 연장",fn:"누드마우스 종양원성 시험 52주 관찰 연장",c:"종양원성",s:"BALB/c nude mice",d:"-",desc:"- 26주→52주 연장 추가 비용",p:57000000,w:"+26",gl:["","","","52주 연장"],note:"26주 시험에 추가"},
{id:4,num:4,n:"Spiking test",fn:"누드마우스 종양원성 Spiking test 3군 추가",c:"종양원성",s:"BALB/c nude mice",d:"-",desc:"- spiking 3군 추가 (52주 기준)",p:177000000,w:"+30",gl:["","","","spiking 3군 추가"],note:"52주 기준"},
{id:5,num:5,n:"QPCR Validation",fn:"QPCR 체내분포 분석을 위한 Validation",c:"체내분포",s:"BALB/c nude mice",d:"-",desc:"- 2개 gene (Alu, GAPDH)\n- 검증용 암수 각각 6마리\n- 최소 8주 소요 (본시험 전 수행)",p:54600000,w:"~8",gl:["","","","2 gene, 검증용 누드마우스"]},
{id:6,num:6,n:"조직분포 채취+분석",fn:"누드마우스 관절강내 투여 후 조직내 분포 채취 및 분석시험",c:"체내분포",s:"BALB/c nude mouse",d:"단회",desc:"- 총 78마리 (대조18+시험60)\n- 관절강내 1회 투여\n- 부검 6포인트 (1일~8주)\n- 적출장기 14개\n- 분석: 60×14 + 18×14 조직",p:111800000,w:"협의",gl:["식약처 가이드라인","","","78마리, 14장기, 6포인트 부검"],warn:[{t:"consult",x:"→ 투여경로 및 관찰기간, 부검포인트 협의 후 금액 산정"},{t:"consult",x:"- 의뢰자 협의하여 마리수, 부검 포인트 변경 가능"},{t:"consult",x:"부검 간격 등은 의뢰자협의로 변경가능"},{t:"note",x:"단, 가슴샘부존"},{t:"cost",x:"※ 투여된 세포의 특성 및 투여경로, 작용부위를 고려하여 추가 장기관찰 가능"}]}
];
const CELL_TX_CATS=["전체","단회독성","종양원성","체내분포"];
// === Document Work - SEND ===
const DOC_SEND=[
{id:1,num:1,n:"설치류 단회 SEND",fn:"설치류 단회 독성시험 SEND",c:"반복/단회독성",p:8000000,w:"2-3",gl:["CDISC SEND","","",""]},
{id:2,num:2,n:"설치류 DRF SEND",fn:"설치류 DRF 독성시험 SEND",c:"반복/단회독성",p:11000000,w:"2-3",gl:["CDISC SEND","","",""]},
{id:3,num:3,n:"설치류 4주 반복 SEND",fn:"설치류 4주 반복 독성시험 SEND",c:"반복/단회독성",p:20000000,w:"2-3",gl:["CDISC SEND","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군, TK 포함경우 별도 추가)"}]},
{id:4,num:4,n:"설치류 26주 반복 SEND",fn:"설치류 26주 반복 독성시험 SEND",c:"반복/단회독성",p:35000000,w:"2-3",gl:["CDISC SEND","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군, TK 포함경우 별도 추가)"}]},
{id:5,num:5,n:"비설치류 4주 반복 SEND",fn:"비설치류 4주 반복 독성시험 SEND",c:"반복/단회독성",p:20000000,w:"2-3",gl:["CDISC SEND","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군, TK 포함경우 별도 추가)"}]},
{id:6,num:6,n:"비설치류 13주 반복 SEND",fn:"비설치류 13주 반복 독성시험 SEND",c:"반복/단회독성",p:25000000,w:"2-3",gl:["CDISC SEND","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군, TK 포함경우 별도 추가)"}]},
{id:7,num:7,n:"비설치류 26주 반복 SEND",fn:"비설치류 26주 반복 독성시험 SEND",c:"반복/단회독성",p:35000000,w:"2-3",gl:["CDISC SEND","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군, TK 포함경우 별도 추가)"}]},
{id:8,num:8,n:"4주 회복 SEND",fn:"4주 회복시험 SEND",c:"반복/단회독성",p:5000000,w:"2-3",gl:["CDISC SEND","","",""]},
{id:9,num:9,n:"TK SEND",fn:"TK 시험 SEND",c:"반복/단회독성",p:5000000,w:"2-3",gl:["CDISC SEND","","",""]},
{id:10,num:10,n:"Telemetry SEND",fn:"Telemetry SEND",c:"안전성약리",p:12000000,w:"2-3",gl:["CDISC SEND","","",""]},
{id:11,num:11,n:"호흡기계 SEND",fn:"호흡기계에 미치는 영향시험 SEND",c:"안전성약리",p:12000000,w:"-",gl:["CDISC SEND","","",""]},
{id:12,num:12,n:"소핵시험 SEND",fn:"소핵시험 SEND",c:"유전독성",p:12000000,w:"2-3",gl:["CDISC SEND","","",""]},
{id:13,num:13,n:"Comet assay SEND",fn:"Comet assay SEND",c:"유전독성",p:12000000,w:"2-3",gl:["CDISC SEND","","",""]},
{id:14,num:14,n:"배태자(랫드) SEND",fn:"배태자발생시험(랫드) SEND",c:"생식독성",p:35000000,w:"2-3",gl:["CDISC SEND","","",""],note:"TK 별도",warn:[{t:"cost",x:"배태자발생시험 (랫드) (TK 포함경우 별도 추가)"}]},
{id:15,num:15,n:"배태자(토끼) SEND",fn:"배태자발생시험(토끼) SEND",c:"생식독성",p:35000000,w:"2-3",gl:["CDISC SEND","","",""],note:"TK 별도",warn:[{t:"cost",x:"배태자발생시험 (토끼) (TK 포함경우 별도 추가)"}]}
];
const DOC_SEND_CATS=["전체","반복/단회독성","안전성약리","유전독성","생식독성"];
// === Document Work - CTD Module 2.6 ===
const DOC_CTD=[
{id:1,num:1,n:"설치류 단회 CTD",fn:"설치류 단회 독성시험 CTD 작성",c:"반복/단회독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:2,num:2,n:"설치류 DRF CTD",fn:"설치류 DRF 독성시험 CTD 작성",c:"반복/단회독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:3,num:3,n:"설치류 4/13주 반복 CTD",fn:"설치류 4,13주 반복 독성시험 CTD 작성",c:"반복/단회독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:4,num:4,n:"설치류 26주 반복 CTD",fn:"설치류 26주 반복 독성시험 CTD 작성",c:"반복/단회독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:5,num:5,n:"비설치류 단회 CTD",fn:"비설치류 단회 독성시험 CTD 작성",c:"반복/단회독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:6,num:6,n:"비설치류 DRF CTD",fn:"비설치류 DRF 독성시험 CTD 작성",c:"반복/단회독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:7,num:7,n:"비설치류 4/13주 반복 CTD",fn:"비설치류 4,13주 반복 독성시험 CTD 작성",c:"반복/단회독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:8,num:8,n:"비설치류 26/39주 반복 CTD",fn:"비설치류 26,39주 반복 독성시험 CTD 작성",c:"반복/단회독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:9,num:9,n:"회복군 추가 CTD",fn:"회복군 추가 CTD 작성",c:"반복/단회독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:10,num:10,n:"PK/TK Valid CTD",fn:"PK/TK Validation CTD 작성",c:"PK/TK",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:11,num:11,n:"PK/TK 분석 CTD",fn:"PK/TK 분석 보고서 CTD 작성",c:"PK/TK",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:12,num:12,n:"복귀돌연변이 CTD",fn:"유전독성: 복귀돌연변이 CTD 작성",c:"유전독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:13,num:13,n:"염색체이상 CTD",fn:"유전독성: 염색체이상 CTD 작성",c:"유전독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:14,num:14,n:"소핵시험 CTD",fn:"유전독성: 소핵시험 CTD 작성",c:"유전독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:15,num:15,n:"중추신경계 CTD",fn:"중추신경계 CTD 작성",c:"안전성약리",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:16,num:16,n:"호흡기계 CTD",fn:"호흡기계 CTD 작성",c:"안전성약리",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:17,num:17,n:"hERG CTD",fn:"hERG assay CTD 작성",c:"안전성약리",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:18,num:18,n:"Telemetry CTD",fn:"Telemetry CTD 작성",c:"안전성약리",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:19,num:19,n:"수태능 CTD",fn:"수태능 및 초기배 발생시험 CTD 작성",c:"생식독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:20,num:20,n:"배태자(Rat) CTD",fn:"배태자 발생시험(Rat) CTD 작성",c:"생식독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:21,num:21,n:"배태자(Rabbit) CTD",fn:"배태자 발생시험(Rabbit) CTD 작성",c:"생식독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:22,num:22,n:"출생전후 CTD",fn:"출생전후 발생 및 모체기능 CTD 작성",c:"생식독성",p:1000000,w:"6-8",gl:["CTD Module 2.6","","",""],warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:23,num:23,n:"아나필락시스 쇼크 CTD",fn:"항원성: 아나필락시스 쇼크반응 CTD 작성",c:"항원성/국소독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:24,num:24,n:"수동피부 CTD",fn:"항원성: 수동피부 아나필락시스 CTD 작성",c:"항원성/국소독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:25,num:25,n:"피부감작성 CTD",fn:"항원성: 피부감작성 시험 CTD 작성",c:"항원성/국소독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:26,num:26,n:"피부자극 CTD",fn:"국소독성: 피부자극시험 CTD 작성",c:"항원성/국소독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:27,num:27,n:"안점막자극 CTD",fn:"국소독성: 안점막자극시험 CTD 작성",c:"항원성/국소독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:28,num:28,n:"광독성 CTD",fn:"국소독성: 광독성시험 CTD 작성",c:"항원성/국소독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:29,num:29,n:"광감작성 CTD",fn:"국소독성: 광감작성시험 CTD 작성",c:"항원성/국소독성",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:30,num:30,n:"조제물분석 CTD",fn:"투여물질의 조제물 분석 CTD 작성",c:"기타",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]},
{id:31,num:31,n:"발암성 CTD",fn:"발암성 시험 CTD 작성",c:"기타",p:300000,w:"6-8",gl:["CTD Module 2.6","","",""]}
];
const DOC_CTD_CATS=["전체","반복/단회독성","PK/TK","유전독성","안전성약리","생식독성","항원성/국소독성","기타"];
// === Document Work - Translation ===
const DOC_TRANS=[
{id:1,num:1,n:"설치류 단회 번역",fn:"설치류 단회 독성시험 영문보고서",c:"반복/단회독성",p:1000000,w:"6-8",gl:["","","",""],note:"요약: 70만"},
{id:2,num:2,n:"설치류 DRF 번역",fn:"설치류 DRF 독성시험 영문보고서",c:"반복/단회독성",p:1000000,w:"6-8",gl:["","","",""],note:"요약: 70만"},
{id:3,num:3,n:"설치류 4/13주 번역",fn:"설치류 4,13주 반복 독성시험 영문보고서",c:"반복/단회독성",p:2500000,w:"6-8",gl:["","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 아래금액으로 별도 추가)"}]},
{id:4,num:4,n:"설치류 26주 번역",fn:"설치류 26주 반복 독성시험 영문보고서",c:"반복/단회독성",p:2500000,w:"6-8",gl:["","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 아래금액으로 별도 추가)"}]},
{id:5,num:5,n:"비설치류 단회 번역",fn:"비설치류 단회 독성시험 영문보고서",c:"반복/단회독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:6,num:6,n:"비설치류 DRF 번역",fn:"비설치류 DRF 독성시험 영문보고서",c:"반복/단회독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:7,num:7,n:"비설치류 4/13주 번역",fn:"비설치류 4,13주 반복 독성시험 영문보고서",c:"반복/단회독성",p:2500000,w:"6-8",gl:["","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 아래금액으로 별도 추가)"}]},
{id:8,num:8,n:"비설치류 26/39주 번역",fn:"비설치류 26,39주 반복 독성시험 영문보고서",c:"반복/단회독성",p:2500000,w:"6-8",gl:["","","",""],note:"회복군/TK 별도",warn:[{t:"cost",x:"(회복군 및 TK 포함경우 아래금액으로 별도 추가)"}]},
{id:9,num:9,n:"회복군 추가 번역",fn:"회복군 추가 영문보고서",c:"반복/단회독성",p:500000,w:"6-8",gl:["","","",""]},
{id:10,num:10,n:"PK/TK Valid 번역",fn:"PK/TK Validation 영문보고서",c:"PK/TK",p:1000000,w:"6-8",gl:["","","",""]},
{id:11,num:11,n:"PK/TK 분석 번역",fn:"PK/TK 분석 보고서 영문보고서",c:"PK/TK",p:1000000,w:"6-8",gl:["","","",""]},
{id:12,num:12,n:"복귀돌연변이 번역",fn:"유전독성: 복귀돌연변이 영문보고서",c:"유전독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:13,num:13,n:"염색체이상 번역",fn:"유전독성: 염색체이상 영문보고서",c:"유전독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:14,num:14,n:"소핵시험 번역",fn:"유전독성: 소핵시험 영문보고서",c:"유전독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:15,num:15,n:"일반약리 번역",fn:"약리시험: 일반약리 영문보고서",c:"안전성약리",p:2000000,w:"6-8",gl:["","","",""]},
{id:16,num:16,n:"중추신경계 번역",fn:"중추신경계 영문보고서",c:"안전성약리",p:1000000,w:"6-8",gl:["","","",""]},
{id:17,num:17,n:"호흡기계 번역",fn:"호흡기계 영문보고서",c:"안전성약리",p:1000000,w:"6-8",gl:["","","",""]},
{id:18,num:18,n:"hERG 번역",fn:"hERG assay 영문보고서",c:"안전성약리",p:1000000,w:"6-8",gl:["","","",""]},
{id:19,num:19,n:"Telemetry 번역",fn:"Telemetry 영문보고서",c:"안전성약리",p:1000000,w:"6-8",gl:["","","",""]},
{id:20,num:20,n:"수태능 번역",fn:"수태능 및 초기배 발생시험 영문보고서",c:"생식독성",p:2500000,w:"6-8",gl:["","","",""],warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:21,num:21,n:"배태자(Rat) 번역",fn:"배태자 발생시험(Rat) 영문보고서",c:"생식독성",p:2500000,w:"6-8",gl:["","","",""],warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:22,num:22,n:"배태자(Rabbit) 번역",fn:"배태자 발생시험(Rabbit) 영문보고서",c:"생식독성",p:2500000,w:"6-8",gl:["","","",""],warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:23,num:23,n:"출생전후 번역",fn:"출생전후 발생 및 모체기능 영문보고서",c:"생식독성",p:2500000,w:"6-8",gl:["","","",""],warn:[{t:"cost",x:"(회복군 및 TK 포함경우 별도 추가)"}]},
{id:24,num:24,n:"조합시험 번역",fn:"생식독성: 조합시험 영문보고서",c:"생식독성",p:4000000,w:"6-8",gl:["","","",""]},
{id:25,num:25,n:"화학물질 스크리닝 번역",fn:"화학물질 생식독성 스크리닝 영문보고서",c:"생식독성",p:2500000,w:"6-8",gl:["","","",""]},
{id:26,num:26,n:"아나필락시스 쇼크 번역",fn:"항원성: 아나필락시스 쇼크반응 영문보고서",c:"항원성/국소독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:27,num:27,n:"수동피부 번역",fn:"항원성: 수동피부 아나필락시스 영문보고서",c:"항원성/국소독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:28,num:28,n:"피부감작성 번역",fn:"항원성: 피부감작성 시험 영문보고서",c:"항원성/국소독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:29,num:29,n:"피부자극 번역",fn:"국소독성: 피부자극시험 영문보고서",c:"항원성/국소독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:30,num:30,n:"안점막자극 번역",fn:"국소독성: 안점막자극시험 영문보고서",c:"항원성/국소독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:31,num:31,n:"광독성 번역",fn:"국소독성: 광독성시험 영문보고서",c:"항원성/국소독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:32,num:32,n:"광감작성 번역",fn:"국소독성: 광감작성시험 영문보고서",c:"항원성/국소독성",p:1000000,w:"6-8",gl:["","","",""]},
{id:33,num:33,n:"조제물분석 번역",fn:"투여물질의 조제물 분석 영문보고서",c:"기타",p:1000000,w:"6-8",gl:["","","",""]},
{id:34,num:34,n:"발암성 번역",fn:"발암성 시험 영문보고서",c:"기타",p:10000000,w:"6-8",gl:["","","",""]}
];
const DOC_TRANS_CATS=["전체","반복/단회독성","PK/TK","유전독성","안전성약리","생식독성","항원성/국소독성","기타"];
// Tree: main→option relationships
const TR={6:{rec:7,tk:{"채혈+분석":{"6pt":8,"8pt":9},"채혈만":{"6pt":10,"8pt":11}}},12:{rec:13,tk:{"채혈+분석":{"6pt":14,"8pt":15},"채혈만":{"6pt":16,"8pt":17}}},18:{rec:19,tk:{"채혈+분석":{"6pt":{"2회":20,"3회":24},"8pt":{"2회":21,"3회":25}},"채혈만":{"6pt":{"2회":22,"3회":26},"8pt":{"2회":23,"3회":27}}}},28:{rec:29,tk:{"채혈+분석":{"6pt":{"2회":30,"3회":34},"8pt":{"2회":31,"3회":35}},"채혈만":{"6pt":{"2회":32,"3회":36},"8pt":{"2회":33,"3회":37}}}},45:{rec:46,tk:{"채혈+분석":{"6pt":47,"8pt":48}}},49:{rec:50,tk:{"채혈+분석":{"6pt":51,"8pt":52}}},53:{rec:54,tk:{"채혈+분석":{"6pt":{"2회":55,"3회":57},"8pt":{"2회":56,"3회":58}}}},59:{rec:60,tk:{"채혈+분석":{"6pt":{"2회":61,"3회":63},"8pt":{"2회":62,"3회":64}}}},65:{rec:66,tk:{"채혈+분석":{"6pt":{"2회":67,"3회":69},"8pt":{"2회":68,"3회":70}}}},84:{tk_list:[85,86]},88:{tk_list:[89,90]},101:{tk_simple:102},103:{tk_simple:104}};
// Collect all option IDs to hide from main list
const OPT_IDS=new Set();
Object.values(TR).forEach(v=>{if(v.rec)OPT_IDS.add(v.rec);if(v.tk){const walk=o=>{if(typeof o==="number")OPT_IDS.add(o);else if(typeof o==="object")Object.values(o).forEach(walk)};walk(v.tk);}if(v.tk_list)v.tk_list.forEach(id=>OPT_IDS.add(id));if(v.tk_simple)OPT_IDS.add(v.tk_simple);});
// Get all option IDs for a main item
const getOptIds=(mid)=>{const t=TR[mid];if(!t)return[];const ids=[];if(t.rec)ids.push(t.rec);if(t.tk){const walk=o=>{if(typeof o==="number")ids.push(o);else if(typeof o==="object")Object.values(o).forEach(walk)};walk(t.tk);}if(t.tk_list)ids.push(...t.tk_list);if(t.tk_simple)ids.push(t.tk_simple);return ids;};
// Resolve TK id from selection state
const resolveTK=(tk,tkScope,tkPt,tkCnt)=>{if(!tk)return null;const scope=tk[tkScope];if(!scope)return null;const pt=scope[tkPt];if(!pt)return null;if(typeof pt==="number")return pt;return pt[tkCnt]||null;};
const fmt=n=>n==null?"-":n.toLocaleString("ko-KR");
// Item meta: id -> [type(0=none,1=vivo,2=vitro), assay(1=함량분석적용,0=제외)]
const IM={1:[0,0],2:[1,1],3:[1,1],4:[1,1],5:[1,1],6:[1,1],7:[1,0],8:[1,0],9:[1,0],10:[1,0],11:[1,0],12:[1,1],13:[1,0],14:[1,0],15:[1,0],16:[1,0],17:[1,0],18:[1,1],19:[1,0],20:[1,0],21:[1,0],22:[1,0],23:[1,0],24:[1,0],25:[1,0],26:[1,0],27:[1,0],28:[1,1],29:[1,0],30:[1,0],31:[1,0],32:[1,0],33:[1,0],34:[1,0],35:[1,0],36:[1,0],37:[1,0],38:[1,1],39:[1,1],40:[1,1],41:[1,1],42:[1,1],43:[1,1],44:[1,1],45:[1,1],46:[1,0],47:[1,0],48:[1,0],49:[1,1],50:[1,0],51:[1,0],52:[1,0],53:[1,1],54:[1,0],55:[1,0],56:[1,0],57:[1,0],58:[1,0],59:[1,1],60:[1,0],61:[1,0],62:[1,0],63:[1,0],64:[1,0],65:[1,1],66:[1,0],67:[1,0],68:[1,0],69:[1,0],70:[1,0],71:[2,0],72:[2,0],73:[1,1],74:[2,0],75:[1,1],76:[1,1],77:[1,1],78:[1,1],79:[2,0],80:[2,0],81:[1,1],82:[1,1],83:[1,1],84:[1,1],85:[1,0],86:[1,0],87:[1,1],88:[1,1],89:[1,0],90:[1,0],91:[1,1],92:[1,1],93:[1,1],94:[1,1],95:[1,1],96:[1,1],97:[1,1],98:[2,0],99:[1,1],100:[1,1],101:[1,1],102:[1,0],103:[1,1],104:[1,0]};
// 조제물분석 단가
const ASSAY_VIVO=10000000; // in vivo 조제물분석 1회
const ASSAY_VITRO=10000000; // in vitro 조제물분석 1회
const CONTENT_UNIT=1000000; // 함량분석 1회당
// Official names for quotation display
const FN={1:"투여물질의 조제물 분석",2:"설치류 단회 투여 독성시험",3:"설치류 1주 투여 DRF 시험",4:"설치류 2주 투여 DRF 시험",5:"설치류 4주 투여 DRF 시험",6:"설치류 2주 반복 투여 독성시험",7:"설치류 2주 반복 투여 2주 회복시험",8:"설치류 2주 반복 투여 독성동태 시험 : 6point 채혈",9:"설치류 2주 반복 투여 독성동태 시험 : 8point 채혈",10:"설치류 2주 반복 투여 독성동태 시험 : 6point 채혈까지만 진행",11:"설치류 2주 반복 투여 독성동태 시험 : 8point 채혈까지만 진행",12:"설치류 4주 반복 투여 독성시험",13:"설치류 4주 반복 투여 2주 회복시험",14:"설치류 4주 반복 투여 독성동태 시험 : 6point 채혈",15:"설치류 4주 반복 투여 독성동태 시험 : 8point 채혈",16:"설치류 4주 반복 투여 독성동태 시험 : 6point 채혈까지만 진행",17:"설치류 4주 반복 투여 독성동태 시험 : 8point 채혈까지만 진행",18:"설치류 13주 반복 투여 독성시험",19:"설치류 13주 반복 투여 4주 회복시험",20:"설치류 13주 반복 투여 독성동태 시험 (2회 채혈) : 6point 채혈",21:"설치류 13주 반복 투여 독성동태 시험 (2회 채혈) : 8point 채혈",22:"설치류 13주 반복 투여 독성동태 시험 (2회 채혈) : 6point 채혈까지만 진행",23:"설치류 13주 반복 투여 독성동태 시험 (2회 채혈) : 8point 채혈까지만 진행",24:"설치류 13주 반복 투여 독성동태 시험 (3회 채혈) : 6point 채혈",25:"설치류 13주 반복 투여 독성동태 시험 (3회 채혈) : 8point 채혈",26:"설치류 13주 반복 투여 독성동태 시험 (3회 채혈) : 6point 채혈까지만 진행",27:"설치류 13주 반복 투여 독성동태 시험 (3회 채혈) : 8point 채혈까지만 진행",28:"설치류 26주 반복 투여 독성시험",29:"설치류 26주 반복 투여 4주 회복시험",30:"설치류 26주 반복 투여 독성동태 시험 (2회 채혈) : 6point 채혈",31:"설치류 26주 반복 투여 독성동태 시험 (2회 채혈) : 8point 채혈",32:"설치류 26주 반복 투여 독성동태 시험 (2회 채혈) : 6point 채혈까지만 진행",33:"설치류 26주 반복 투여 독성동태 시험 (2회 채혈) : 8point 채혈까지만 진행",34:"설치류 26주 반복 투여 독성동태 시험 (3회 채혈) : 6point 채혈",35:"설치류 26주 반복 투여 독성동태 시험 (3회 채혈) : 8point 채혈",36:"설치류 26주 반복 투여 독성동태 시험 (3회 채혈) : 6point 채혈까지만 진행",37:"설치류 26주 반복 투여 독성동태 시험 (3회 채혈) : 8point 채혈까지만 진행",38:"비설치류 단회 투여 독성시험 (DE법)",39:"비설치류 단회 투여 독성시험",40:"비설치류 1주 투여 DRF 시험",41:"비설치류 2주 투여 DRF 시험",42:"비설치류 4주 투여 DRF 시험",43:"비설치류 13주 투여 DRF 시험 (시험군 4)",44:"비설치류 13주 투여 DRF 시험 (시험군 3)",45:"비설치류 2주 반복 투여 독성시험",46:"비설치류 2주 반복 투여 2주 회복시험",47:"비설치류 2주 반복 투여 독성동태 시험 : 6 point",48:"비설치류 2주 반복 투여 독성동태 시험 : 8 point",49:"비설치류 4주 반복 투여 독성시험",50:"비설치류 4주 반복 투여 2주 회복시험",51:"비설치류 4주 반복 투여 독성동태 시험 : 6 point",52:"비설치류 4주 반복 투여 독성동태 시험 : 8 point",53:"비설치류 13주 반복 투여 독성시험",54:"비설치류 13주 반복 투여 4주 회복시험",55:"비설치류 13주 반복 투여 독성동태 시험 (2회 채혈) : 6 point",56:"비설치류 13주 반복 투여 독성동태 시험 (2회 채혈) : 8 point",57:"비설치류 13주 반복 투여 독성동태 시험 (3회 채혈) : 6 point",58:"비설치류 13주 반복 투여 독성동태 시험 (3회 채혈) : 8 point",59:"비설치류 26주 반복 투여 독성시험",60:"비설치류 26주 반복 투여 4주 회복시험",61:"비설치류 26주 반복 투여 독성동태 시험 (2회 채혈) : 6 point",62:"비설치류 26주 반복 투여 독성동태 시험 (2회 채혈) : 8 point",63:"비설치류 26주 반복 투여 독성동태 시험 (3회 채혈) : 6 point",64:"비설치류 26주 반복 투여 독성동태 시험 (3회 채혈) : 8 point",65:"비설치류 39주 반복 투여 독성시험",66:"비설치류 39주 반복 투여 4주 회복시험",67:"비설치류 39주 반복 투여 독성동태 시험 (2회 채혈) : 6 point",68:"비설치류 39주 반복 투여 독성동태 시험 (2회 채혈) : 8 point",69:"비설치류 39주 반복 투여 독성동태 시험 (3회 채혈) : 6 point",70:"비설치류 39주 반복 투여 독성동태 시험 (3회 채혈) : 8 point",71:"유전독성시험 : 복귀 돌연변이 (OECD TG471)",72:"유전독성시험 : 염색체 이상 시험 (OECD TG473)",73:"유전독성시험 : 소핵시험 (OECD TG474)",74:"유전독성시험 : MLA (OECD TG490)",75:"유전독성시험 : Comet assay (OECD TG489)",76:"유전독성시험 : Pig-a assay (OECD TG470)",77:"안전성약리 시험 : 중추신경계에 미치는 영향",78:"안전성약리 시험 : 호흡기계에 미치는 영향",79:"안전성약리 시험 : hERG assay (국내 제출)",80:"안전성약리 시험 : hERG assay (USFDA 제출)",81:"안전성약리 시험 : Telemetry assay",82:"생식독성 : 수태능 및 초기배 발생시험",83:"생식독성 : 배태자 발생 DRF시험 (예비시험) - Rat",84:"생식독성 : 배태자 발생 시험 (본시험) - Rat",85:"생식독성 : 배태자 발생 본시험의 TK 채혈 및 분석시험 - Rat",86:"생식독성 : 태반이행(placenta transfer) 확인 - Rat",87:"생식독성 : 배태자 발생 DRF 시험 (예비시험) - Rabbit",88:"생식독성 : 배태자 발생 시험 (본시험) - Rabbit",89:"생식독성 : 배태자 발생 본시험의 TK 채혈 및 분석시험 - Rabbit",90:"생식독성 : 태반이행(placenta transfer) 확인 - Rabbit",91:"생식독성 : 출생전후 발생 및 모체기능",92:"항원성시험 : 아나필락시스 쇼크반응",93:"항원성시험 : 동종 수동피부 아나필락시스",94:"항원성시험 : 피부감작성 시험 (Buehler법)",95:"항원성시험 : 피부감작성 (국소림프절시험, LLNA)",96:"국소독성시험 : 피부자극시험",97:"국소독성시험 : 안점막자극시험",98:"In vitro 3T3 NRU 광독성시험",99:"국소독성시험 : 광독성시험",100:"국소독성시험 : 광감작성시험 (Harber법)",101:"발암성시험 : 랫드",102:"발암성시험 : 랫드 독성동태",103:"발암성시험 : 마우스",104:"발암성시험 : 마우스 독성동태"};
const GL={1:["","","의약품등의 독성시험기준 제4조","투여 조제물의 균질성, 안정성 및 함량을 HPLC 등으로 분석하여 투여량의 정확성 확보"],2:["OECD TG 420/423/425","ICH M3(R2)","독성시험기준 제5조","단회 투여 후 14일간 관찰하여 급성독성 프로파일, 표적장기 및 독성 징후를 평가"],3:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","본시험의 용량 설정을 위한 용량결정시험(DRF)"],4:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","본시험의 용량 설정을 위한 용량결정시험(DRF). 2주간 반복투여"],5:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","본시험의 용량 설정을 위한 용량결정시험(DRF). 4주간 반복투여"],6:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","2주간 반복 투여 후 혈액학, 혈액생화학, 병리조직학적 검사로 전신독성, 표적장기 및 NOAEL 평가"],7:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","본시험 종료 후 2주간 무투여 회복기를 두어 독성 변화의 가역성 평가"],8:["","ICH S3A","독성시험기준 제6조","6 point 채혈로 전신노출량(AUC, Cmax) 평가. LC/MS/MS Full Validation, ISR(10%)"],9:["","ICH S3A","독성시험기준 제6조","8 point 채혈로 전신노출량(AUC, Cmax) 평가. LC/MS/MS 분석"],10:["","ICH S3A","독성시험기준 제6조","6 point 채혈까지만 진행, 검체를 의뢰자에게 전달"],11:["","ICH S3A","독성시험기준 제6조","8 point 채혈까지만 진행, 검체를 의뢰자에게 전달"],12:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","4주간 반복 투여 후 혈액학, 혈액생화학, 병리조직학적 검사로 전신독성 및 NOAEL 평가"],13:["OECD TG 407","ICH M3(R2), ICH S4","독성시험기준 제6조","2주간 무투여 회복기, 독성 변화의 가역성 평가"],14:["","ICH S3A","독성시험기준 제6조","4주 반복투여 병행 6 point 채혈, LC/MS/MS Full Validation"],15:["","ICH S3A","독성시험기준 제6조","4주 반복투여 병행 8 point 채혈, LC/MS/MS 분석"],16:["","ICH S3A","독성시험기준 제6조","6 point 채혈까지만, 검체 전달"],17:["","ICH S3A","독성시험기준 제6조","8 point 채혈까지만, 검체 전달"],18:["OECD TG 408","ICH M3(R2), ICH S4","독성시험기준 제6조","13주간 반복 투여 후 아만성독성 평가. 혈액학, 혈액생화학, 요검사, 안과검사, 병리조직 검사"],19:["OECD TG 408","ICH M3(R2), ICH S4","독성시험기준 제6조","4주간 무투여 회복기, 독성 변화의 가역성 평가"],20:["","ICH S3A","독성시험기준 제6조","2회 채혈(투여 초기/말기), 6 point, 전신노출량 변화 평가"],21:["","ICH S3A","독성시험기준 제6조","2회 채혈, 8 point, 전신노출량 변화 평가"],22:["","ICH S3A","독성시험기준 제6조","2회 채혈, 6 point 채혈까지만, 검체 전달"],23:["","ICH S3A","독성시험기준 제6조","2회 채혈, 8 point 채혈까지만, 검체 전달"],24:["","ICH S3A","독성시험기준 제6조","3회 채혈, 6 point, 전신노출량 시간경과 상세 평가"],25:["","ICH S3A","독성시험기준 제6조","3회 채혈, 8 point, 전신노출량 상세 평가"],26:["","ICH S3A","독성시험기준 제6조","3회 채혈, 6 point 채혈까지만, 검체 전달"],27:["","ICH S3A","독성시험기준 제6조","3회 채혈, 8 point 채혈까지만, 검체 전달"],28:["OECD TG 452","ICH M3(R2), ICH S4","독성시험기준 제6조","26주간 반복 투여하여 만성독성 평가. 혈액학, 혈액생화학, 요검사, 안과검사, 병리조직 검사"],29:["OECD TG 452","ICH M3(R2), ICH S4","독성시험기준 제6조","4주간 무투여 회복기, 만성독성 변화의 가역성 평가"],30:["","ICH S3A","독성시험기준 제6조","2회 채혈, 6 point, 전신노출량 평가"],31:["","ICH S3A","독성시험기준 제6조","2회 채혈, 8 point, 전신노출량 평가"],32:["","ICH S3A","독성시험기준 제6조","2회 채혈, 6 point 채혈까지만, 검체 전달"],33:["","ICH S3A","독성시험기준 제6조","2회 채혈, 8 point 채혈까지만, 검체 전달"],34:["","ICH S3A","독성시험기준 제6조","3회 채혈, 6 point, 전신노출량 상세 평가"],35:["","ICH S3A","독성시험기준 제6조","3회 채혈, 8 point, 전신노출량 상세 평가"],36:["","ICH S3A","독성시험기준 제6조","3회 채혈, 6 point 채혈까지만, 검체 전달"],37:["","ICH S3A","독성시험기준 제6조","3회 채혈, 8 point 채혈까지만, 검체 전달"],38:["OECD TG 423","ICH M3(R2)","독성시험기준 제5조","DE법으로 7일 간격 총 3회 단계적 증량 투여, 급성독성 평가"],39:["OECD TG 420/423/425","ICH M3(R2)","독성시험기준 제5조","비설치류 단회 투여 후 급성독성 프로파일, 표적장기 및 독성 징후 평가"],40:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 1주 DRF. 독성 프로파일 및 적정 용량 범위 결정"],41:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 2주 DRF"],42:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 4주 DRF"],43:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 13주 DRF (4군)"],44:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 13주 DRF (3군)"],45:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 2주간 반복 투여하여 전신독성, 표적장기 및 NOAEL 평가"],46:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","2주 회복시험, 독성 변화의 가역성 평가"],47:["","ICH S3A","독성시험기준 제6조","비설치류 2주 반복투여 독성동태. 6 point 채혈 및 LC/MS/MS 분석"],48:["","ICH S3A","독성시험기준 제6조","비설치류 2주 반복투여 독성동태. 8 point 채혈 및 LC/MS/MS 분석"],49:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 4주간 반복 투여, 전신독성 및 NOAEL 평가"],50:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","2주 회복시험, 가역성 평가"],51:["","ICH S3A","독성시험기준 제6조","비설치류 4주 독성동태. 6 point"],52:["","ICH S3A","독성시험기준 제6조","비설치류 4주 독성동태. 8 point"],53:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 13주간 반복 투여 아만성독성 평가"],54:["OECD TG 409","ICH M3(R2), ICH S4","독성시험기준 제6조","4주 회복시험, 가역성 평가"],55:["","ICH S3A","독성시험기준 제6조","비설치류 13주, 2회 채혈, 6 point"],56:["","ICH S3A","독성시험기준 제6조","비설치류 13주, 2회 채혈, 8 point"],57:["","ICH S3A","독성시험기준 제6조","비설치류 13주, 3회 채혈, 6 point"],58:["","ICH S3A","독성시험기준 제6조","비설치류 13주, 3회 채혈, 8 point"],59:["OECD TG 452","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 26주간 반복 투여 만성독성 평가"],60:["OECD TG 452","ICH M3(R2), ICH S4","독성시험기준 제6조","4주 회복시험, 가역성 평가"],61:["","ICH S3A","독성시험기준 제6조","비설치류 26주, 2회 채혈, 6 point"],62:["","ICH S3A","독성시험기준 제6조","비설치류 26주, 2회 채혈, 8 point"],63:["","ICH S3A","독성시험기준 제6조","비설치류 26주, 3회 채혈, 6 point"],64:["","ICH S3A","독성시험기준 제6조","비설치류 26주, 3회 채혈, 8 point"],65:["OECD TG 452","ICH M3(R2), ICH S4","독성시험기준 제6조","비설치류 39주(9개월) 만성독성 평가. ICH S4 비설치류 최장 기간"],66:["OECD TG 452","ICH M3(R2), ICH S4","독성시험기준 제6조","4주 회복시험, 가역성 평가"],67:["","ICH S3A","독성시험기준 제6조","비설치류 39주, 2회 채혈, 6 point"],68:["","ICH S3A","독성시험기준 제6조","비설치류 39주, 2회 채혈, 8 point"],69:["","ICH S3A","독성시험기준 제6조","비설치류 39주, 3회 채혈, 6 point"],70:["","ICH S3A","독성시험기준 제6조","비설치류 39주, 3회 채혈, 8 point"],71:["OECD TG 471","ICH S2(R1)","독성시험기준 제7조","5개 균주 복귀돌연변이시험. 유전자 돌연변이 유발성 평가"],72:["OECD TG 473","ICH S2(R1)","독성시험기준 제7조","CHL 세포 염색체이상시험. 구조적/수적 염색체이상 유발성 평가"],73:["OECD TG 474","ICH S2(R1)","독성시험기준 제7조","설치류 골수 적혈구 소핵시험. 염색체 이상 유발성 in vivo 평가"],74:["OECD TG 490","ICH S2(R1)","독성시험기준 제7조","Mouse lymphoma L5178Y 세포 tk 유전자좌 돌연변이 측정"],75:["OECD TG 489","ICH S2(R1)","독성시험기준 제7조","단세포 전기영동법으로 DNA 손상(가닥절단) 직접 검출"],76:["OECD TG 470","ICH S2(R1)","독성시험기준 제7조","말초혈 적혈구 Pig-a 유전자 돌연변이 빈도를 FACS로 측정"],77:["","ICH S7A","독성시험기준 제10조","Irwin test/FOB로 중추신경계 기능(행동, 활동성, 협조운동 등) 평가"],78:["","ICH S7A","독성시험기준 제10조","호흡수, 일회호흡량, 분당호흡량 측정으로 호흡기계 영향 평가"],79:["","ICH S7B","독성시험기준 제10조","hERG 채널 전류 억제를 in vitro patch-clamp법으로 측정, QT 연장 위험성 평가"],80:["","ICH S7B","독성시험기준 제10조","양성대조군 4개 포함 hERG assay. US FDA 제출용 강화 프로토콜"],81:["","ICH S7A, ICH S7B","독성시험기준 제10조","의식있는 Beagle dog에 Telemetry 장치로 혈압, 심박수, 심전도 실시간 측정"],82:["OECD TG 421/422","ICH S5(R3)","독성시험기준 제8조","교배 전~착상까지 투여하여 수태능과 초기배 발생 영향 평가"],83:["OECD TG 414","ICH S5(R3)","독성시험기준 제8조","Rat 배태자 발생 DRF. GD6-17 투여, 적정 용량 결정"],84:["OECD TG 414","ICH S5(R3)","독성시험기준 제8조","Rat 배태자 발생 본시험. 모체독성, 배태자 사망, 기형 발생 등 종합 평가"],85:["","ICH S3A, ICH S5(R3)","독성시험기준 제8조","배태자 발생 본시험(Rat) 병행 TK. LC/MS/MS Full Validation"],86:["","ICH S3A, ICH S5(R3)","독성시험기준 제8조","모체 혈장과 태자 조직 내 시험물질 농도 비교, 태반이행 확인"],87:["OECD TG 414","ICH S5(R3)","독성시험기준 제8조","Rabbit 배태자 발생 DRF. GD6-19 투여"],88:["OECD TG 414","ICH S5(R3)","독성시험기준 제8조","Rabbit 배태자 발생 본시험. 모체독성, 기형 발생 등 종합 평가"],89:["","ICH S3A, ICH S5(R3)","독성시험기준 제8조","배태자 발생 본시험(Rabbit) 병행 TK"],90:["","ICH S3A, ICH S5(R3)","독성시험기준 제8조","Rabbit 태반이행 확인"],91:["OECD TG 426 (참고)","ICH S5(R3)","독성시험기준 제8조","GD6~PND21 투여, F1세대 성장/발달/행동/생식능 관찰"],92:["","ICH S8","독성시험기준 제9조","Guinea pig 반복 감작 후 정맥 야기, 전신성 아나필락시스 쇼크 관찰"],93:["","ICH S8","독성시험기준 제9조","감작 Guinea pig 혈청 → 비감작 동물 피내 주사 후 정맥 야기, PCA 반응 평가"],94:["OECD TG 406","ICH S8","독성시험기준 제9조","Buehler법(첩포)으로 Guinea pig 피부감작성 평가"],95:["OECD TG 442B","ICH S8","독성시험기준 제9조","CBA/J mouse 귀 도포 후 림프절 세포증식(BrdU) ELISA 측정"],96:["OECD TG 404","","독성시험기준 제11조","Rabbit 피부 단회 도포 후 24,48,72hr 홍반/부종 관찰"],97:["OECD TG 405","","독성시험기준 제11조","Rabbit 안구 점안 후 24,48,72hr 각막/홍채/결막 자극성 평가"],98:["OECD TG 432","ICH S10","독성시험기준 제11조","Balb/c 3T3 세포 UV 조사/비조사 NRU 비교, 광독성 평가"],99:["OECD TG 432 (참고)","ICH S10","독성시험기준 제11조","Guinea pig 시험물질 도포 후 UV 조사, 광독성 반응 평가"],100:["OECD TG 406 (참고)","ICH S10","독성시험기준 제11조","Harber법 Guinea pig 시험물질+UV 반복 감작/야기, 광감작성 평가"],101:["OECD TG 451","ICH S1A/S1B/S1C(R2)","독성시험기준 제12조","랫드 약 2년간 투여, 종양 발생 빈도/잠복기/유형 평가"],102:["","ICH S3A, ICH S1C(R2)","독성시험기준 제12조","발암성시험(랫드) 병행 TK"],103:["OECD TG 451","ICH S1A/S1B/S1C(R2)","독성시험기준 제12조","마우스 약 2년간 투여, 종양 발생 평가. 4주DRF/13주 반복독성 선행 필요"],104:["","ICH S3A, ICH S1C(R2)","독성시험기준 제12조","발암성시험(마우스) 병행 TK"]};

// 함량분석 횟수 계산: 투여기간(d) 기준 4주당 1회, 단회/1회/1주 등=1회
function calcContentCount(it){
const d=it.d;
if(!d||d==="-")return 1; // 기간 불명 = 1회
if(d==="단회"||d==="1회"||d==="3회"||d==="수회"||d==="3일"||d==="1주")return 1;
// "N주" 패턴
const m=d.match(/(\d+)주/);
if(m){const w=parseInt(m[1]);return Math.max(1,Math.ceil(w/4));}
// "4-9주" 같은 범위 -> 큰값 기준
const r=d.match(/(\d+)-(\d+)주/);
if(r){const w=parseInt(r[2]);return Math.max(1,Math.ceil(w/4));}
// GD6-17(~12일≈2주), GD6-19(~14일≈2주), GD6~PND21(~36일≈5주)
if(d.includes("PND"))return 2;
if(d.startsWith("GD"))return 1;
return 1;
}
const td=new Date();
const ds=`${td.getFullYear()}년 ${td.getMonth()+1}월 ${td.getDate()}일`;

export default function App(){
const[mode,setMode]=useState(""); // drug*, hf*, md*, cos*
const C=({i,t,d,o,h,w})=><div onClick={o} style={{width:w||240,padding:w?"32px 24px":"28px 20px",background:"rgba(255,255,255,.06)",border:"2px solid rgba(255,255,255,.1)",borderRadius:16,cursor:"pointer",textAlign:"center"}} onMouseEnter={e=>{e.currentTarget.style.background="rgba(255,255,255,.12)";e.currentTarget.style.borderColor=h;}} onMouseLeave={e=>{e.currentTarget.style.background="rgba(255,255,255,.06)";e.currentTarget.style.borderColor="rgba(255,255,255,.1)";}}><div style={{fontSize:w?48:40,marginBottom:w?12:10}}>{i}</div><div style={{fontSize:w?18:16,fontWeight:700,color:"#fff",marginBottom:6}}>{t}</div><div style={{fontSize:w?12:11,color:"rgba(255,255,255,.5)",whiteSpace:"pre-line",lineHeight:1.6}}>{d}</div></div>;
const go=(m)=>{setMode(m);setSel({});setOpts({});setCat("전체");setSearch("");};
const WARN_LABEL={pre:"🔗 선행시험 필수",cost:"💰 추가비용 조건",exempt:"🚫 면제/생략 가능",consult:"🤝 협의 필요",lead:"⏰ 리드타임 주의",edit:"✏️ 견적 수정 필요",note:"📋 참고"};
const WARN_CLR={pre:"#dc2626",cost:"#d97706",exempt:"#059669",consult:"#2563eb",lead:"#7c3aed",edit:"#ea580c",note:"#64748b"};
const NAV={
top:[
{i:"💊",t:"의약품",d:"의약품 · 복합제 · 백신 · 스크리닝\n세포치료제 · KGLP/OECD",o:()=>setMode("drug"),h:"#2563eb",w:260},
{i:"🥗",t:"건강기능식품",d:"개별인정형 · 프로바이오틱스\n한시적식품 · KGLP",o:()=>setMode("hf"),h:"#059669",w:260},
{i:"🏥",t:"의료기기",d:"생물학적 안전성시험\nISO 10993 · KGLP",o:()=>setMode("md"),h:"#0d9488",w:260},
{i:"💄",t:"화장품",d:"대체법 · 줄기세포배양액\n독성시험 · KGLP",o:()=>setMode("cos"),h:"#db2777",w:260},
{i:"📄",t:"문서작업",d:"SEND · CTD Module 2.6\n번역(영문보고서)",o:()=>setMode("doc"),h:"#6366f1",w:260}
],
drug:[
{i:"💉",t:"의약품",d:"104개 시험항목 · KGLP/OECD\n경구/정맥/피하/근육/경피",o:()=>go("drug_single"),h:"#2563eb"},
{i:"💊💊",t:"복합제",d:"2종/3종/4종 복합제\n반복투여+TK+조제물",o:()=>setMode("drug_combo"),h:"#7c3aed"},
{i:"🧬",t:"백신",d:"3개 시험항목 · KGLP\n반복투여+회복+항체형성",o:()=>go("drug_vaccine"),h:"#0891b2"},
{i:"🔬",t:"스크리닝",d:"독성시험 · 심혈관계\nnon-GLP 탐색시험",o:()=>setMode("drug_screen"),h:"#ea580c"},
{i:"🧫",t:"세포치료제",d:"6개 시험항목 · KGLP\n단회독성+종양원성+체내분포",o:()=>go("drug_celltx"),h:"#b45309"}
],
drug_screen:[
{i:"🧪",t:"독성시험 스크리닝",d:"8개 시험항목\nnon-GLP 탐색시험",o:()=>go("drug_screen_tox"),h:"#ea580c"},
{i:"❤️",t:"심혈관계 스크리닝",d:"6개 시험항목\nhERG · MEA · Telemetry",o:()=>go("drug_screen_cv"),h:"#ef4444"}
],
md:[
{i:"🧫",t:"생물학적 안전성시험",d:"18개 시험항목 · KGLP\nISO 10993 시리즈",o:()=>go("md_bio"),h:"#0d9488"}
],
cos:[
{i:"🧪",t:"대체법",d:"9개 시험항목 · KGLP\n유전독성+피부/안자극+광독성",o:()=>go("cos_alt"),h:"#db2777"},
{i:"🧬",t:"줄기세포배양액",d:"12개 시험항목 · KGLP\n경피 반복투여+유전독성+감작",o:()=>go("cos_stem"),h:"#ec4899"}
],
doc:[
{i:"📊",t:"SEND",d:"15개 항목\nCDISC SEND 데이터 변환",o:()=>go("doc_send"),h:"#6366f1"},
{i:"📋",t:"CTD Module 2.6",d:"31개 항목\nCTD 비임상 개요서 작성",o:()=>go("doc_ctd"),h:"#818cf8"},
{i:"🌐",t:"번역(영문보고서)",d:"34개 항목\n영문 최종보고서 작성",o:()=>go("doc_trans"),h:"#a78bfa"}
],
hf:[
{i:"📋",t:"개별인정형",d:"7개 시험항목 · KGLP\n단회+반복+유전독성",o:()=>go("hf_indv"),h:"#059669"},
{i:"🦠",t:"프로바이오틱스",d:"5개 시험항목 · KGLP\n단회+반복+유전독성",o:()=>go("hf_prob"),h:"#10b981"},
{i:"📝",t:"한시적식품",d:"8개 시험항목 · KGLP\n단회+반복+유전독성+면역독성",o:()=>go("hf_temp"),h:"#34d399"}
]
};
const SUB={hf:"🥗 건강기능식품",drug:"💊 의약품",drug_screen:"🔬 스크리닝",md:"🏥 의료기기",cos:"💄 화장품",doc:"📄 문서작업"};
const SUB_CLR={hf:"#86efac",drug:"#93c5fd",drug_screen:"#fdba74",md:"#5eead4",cos:"#f9a8d4",doc:"#a5b4fc"};
const[route,setRoute]=useState("경구피하근육");
const[hfRoute,setHfRoute]=useState("경구");
const[std,setStd]=useState("KGLP");
const[comboType,setComboType]=useState(2); // 복합제 종수: 2,3,4
const[search,setSearch]=useState("");
const[cat,setCat]=useState("전체");
const[sel,setSel]=useState({});
const[disc,setDisc]=useState(0);
const[dt,setDt]=useState("percent");
const[page,setPage]=useState("edit");
const[pt,setPt]=useState("cover");
const[exp,setExp]=useState({});
const[memo,setMemo]=useState({});
const[opts,setOpts]=useState({});
const[info,setInfo]=useState({org:"",person:"",contact:"",email:"",purpose:"독성시험",substance:"",qn:`Q-${td.getFullYear()}-${String(td.getMonth()+1).padStart(2,"0")}${String(td.getDate()).padStart(2,"0")}-001`});
const ref=useRef(null);
const isDrug=mode==="drug_single";
const isHF=mode==="hf_indv"||mode==="hf_prob"||mode==="hf_temp";
const isCombo=mode==="drug_combo";
const isVaccine=mode==="drug_vaccine";
const isScreen=mode==="drug_screen_tox"||mode==="drug_screen_cv";
const isMD=mode==="md_bio";
const isCos=mode==="cos_alt"||mode==="cos_stem";
const isCellTx=mode==="drug_celltx";
const isDoc=mode==="doc_send"||mode==="doc_ctd"||mode==="doc_trans";
const isSimple=isHF||isCombo||isVaccine||isScreen||isMD||isCos||isCellTx||isDoc;
const curData=isCombo?COMBO:isVaccine?VACCINE:mode==="drug_screen_tox"?SCREEN:mode==="drug_screen_cv"?CV_SCREEN:isMD?MD_BIO:mode==="cos_alt"?COS_ALT:mode==="cos_stem"?COS_STEM:isCellTx?CELL_TX:mode==="doc_send"?DOC_SEND:mode==="doc_ctd"?DOC_CTD:mode==="doc_trans"?DOC_TRANS:mode==="hf_indv"?HF_INDV:mode==="hf_prob"?HF_PROB:mode==="hf_temp"?HF_TEMP:D;
const curCats=isCombo?COMBO_CATS:isVaccine?VACCINE_CATS:mode==="drug_screen_tox"?SCREEN_CATS:mode==="drug_screen_cv"?CV_SCREEN_CATS:isMD?MD_BIO_CATS:mode==="cos_alt"?COS_ALT_CATS:mode==="cos_stem"?COS_STEM_CATS:isCellTx?CELL_TX_CATS:mode==="doc_send"?DOC_SEND_CATS:mode==="doc_ctd"?DOC_CTD_CATS:mode==="doc_trans"?DOC_TRANS_CATS:mode==="hf_indv"?HF_INDV_CATS:mode==="hf_prob"?HF_PROB_CATS:mode==="hf_temp"?HF_TEMP_CATS:CATS;
const modeLabel=isCombo?`복합제(${comboType}종)`:isVaccine?"백신":mode==="drug_screen_tox"?"독성 스크리닝":mode==="drug_screen_cv"?"심혈관계 스크리닝":isMD?"의료기기(생물학적안전성)":mode==="cos_alt"?"화장품(대체법)":mode==="cos_stem"?"화장품(줄기세포배양액)":isCellTx?"세포치료제":mode==="doc_send"?"SEND":mode==="doc_ctd"?"CTD Module 2.6":mode==="doc_trans"?"번역(영문보고서)":mode==="hf_indv"?"건기식(개별인정형)":mode==="hf_prob"?"건기식(프로바이오틱스)":mode==="hf_temp"?"건기식(한시적식품)":"의약품";

const iv=route==="정맥경피";
const isOecd=std==="KGLP,OECD";
const gp=i=>{
if(isCombo)return comboType===2?i.p2:comboType===3?i.p3:i.p4;
if(isHF||isVaccine||isScreen)return i.p;
const base=iv?i.ip:i.op;
if(!isOecd)return base;
const oe=OE[i.num];
if(oe)return iv?(oe.oip??base):(oe.oop??base);
const ov=OV[i.id];
if(ov)return iv?(ov.oip??base):(ov.oop??base);
return base;
};
const gr=i=>isCombo?"경구":isVaccine?"근육":isScreen?(i.d==="-"?"-":"경구"):isMD?(i.d==="-"?"-":(i.desc?.includes("경구")?"경구":i.d)):(isHF?hfRoute:(iv?i.ir:i.or));
const gw=i=>isSimple?i.w:(iv?i.iw:i.ow);

const fl=useMemo(()=>curData.filter(i=>{
if(isDrug && OPT_IDS.has(i.id))return false;
if(isDrug && i.id===1)return false;
if(isHF && i.id===1)return false;
// combo: show all items (no hidden items)
const cc=i.c;
if(cat!=="전체"&&cc!==cat)return false;
if(search){const q=search.toLowerCase();return i.n.toLowerCase().includes(q)||(i.desc||"").toLowerCase().includes(q)||cc.includes(q)||(isSimple?(i.fn||""):(FN[i.id]||"")).toLowerCase().includes(q);}
return true;
}),[search,cat,curData,isSimple,isDrug]);

const si=curData.filter(i=>sel[i.id]);
const sub=si.reduce((a,i)=>a+(gp(i)||0),0);

// 조제물분석 자동계산
const hasVivo=isDrug&&si.some(i=>IM[i.id]&&IM[i.id][0]===1);
const hasVitro=isDrug&&si.some(i=>IM[i.id]&&IM[i.id][0]===2);
const assayBase=isDrug?(hasVivo?ASSAY_VIVO:0)+(hasVitro?ASSAY_VITRO:0):0;
const contentItems=isDrug?si.filter(i=>IM[i.id]&&IM[i.id][1]===1):[];
const contentTotal=contentItems.reduce((a,i)=>a+calcContentCount(i)*CONTENT_UNIT,0);
const hfFormulation=isHF&&si.length>0?26000000:0;
const formulationPrice=isDrug?(assayBase+contentTotal):isHF?hfFormulation:0; // combo/vaccine/screen: no auto formulation

const subAll=sub+formulationPrice;
const da=dt==="percent"?Math.round(subAll*disc/100):disc;
const tot=subAll-da;
const vat=Math.round(tot*0.1);

const tgl=id=>{
setSel(p=>{
const next={...p};
if(next[id]){
// Deselecting: remove this + all child options
delete next[id];
getOptIds(id).forEach(oid=>delete next[oid]);
setOpts(o=>{const n={...o};delete n[id];return n;});
} else {
next[id]=true;
// If this is a main item with tree, init default opts
if(TR[id]){
const t=TR[id];
setOpts(o=>({...o,[id]:{rec:false,tk:false,tkScope:"채혈+분석",tkPt:"6pt",tkCnt:"2회",...(t.tk_list?{tkToggles:{}}:{}),tkSimple:false}}));
}
}
return next;
});
};
const rm=id=>{
setSel(p=>{const n={...p};delete n[id];getOptIds(id).forEach(oid=>delete n[oid]);return n;});
setOpts(o=>{const n={...o};delete n[id];return n;});
};
// Sync option selections to sel whenever opts changes
const syncOpts=(mid,optState)=>{
setOpts(o=>({...o,[mid]:optState}));
setSel(p=>{
const next={...p};
const t=TR[mid];if(!t)return next;
// Clear all option IDs first
getOptIds(mid).forEach(oid=>delete next[oid]);
// Re-add based on optState
if(t.rec && optState.rec) next[t.rec]=true;
if(t.tk && optState.tk){
const resolved=resolveTK(t.tk,optState.tkScope,optState.tkPt,optState.tkCnt);
if(resolved)next[resolved]=true;
}
if(t.tk_list && optState.tkToggles){
t.tk_list.forEach(id=>{if(optState.tkToggles[id])next[id]=true;});
}
if(t.tk_simple && optState.tkSimple) next[t.tk_simple]=true;
return next;
});
};

const doPrint=()=>{
const w=window.open("","_blank");
w.document.write(`<!DOCTYPE html><html><head><meta charset="utf-8"><title>견적서</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Noto Sans KR',sans-serif;color:#1a1a1a;font-size:11px}@page{size:A4;margin:15mm 20mm}.pb{page-break-before:always}table{width:100%;border-collapse:collapse}th,td{border:1px solid #c8c8c8;padding:5px 8px}th{background:#1a365d;color:#fff;font-weight:500;font-size:10px}.r{text-align:right}.c{text-align:center}.l{text-align:left}.db{margin-bottom:14px;border:1px solid #d1d5db;border-radius:4px;overflow:hidden}.dh{background:#f1f5f9;padding:7px 12px;font-weight:600;font-size:11px;border-bottom:1px solid #d1d5db}.dd{padding:10px 14px;font-size:10px;white-space:pre-line;line-height:1.7;color:#374151}.bg{display:inline-block;padding:1px 8px;border-radius:10px;font-size:9px;color:#fff;margin-left:6px}</style></head><body>`);
w.document.write(ref.current.innerHTML);
w.document.write(`</body></html>`);
w.document.close();
setTimeout(()=>w.print(),400);
};

const bd=(c)=>({display:"inline-block",padding:"1px 8px",borderRadius:10,fontSize:9,color:"#fff",background:c,marginLeft:6,fontWeight:500});

// ===== PREVIEW =====
if(page==="preview"){
return(
<div style={{minHeight:"100vh",background:"#4b5563",fontFamily:"'Noto Sans KR',system-ui,sans-serif"}}>
<div style={{background:"#111827",color:"#fff",padding:"10px 24px",display:"flex",alignItems:"center",gap:12,position:"sticky",top:0,zIndex:10}}>
<button onClick={()=>setPage("edit")} style={{padding:"7px 16px",background:"#374151",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:500}}>← 편집</button>
<div style={{display:"flex",background:"#374151",borderRadius:6,overflow:"hidden"}}>
{[["cover","표지"],["quote","견적서"],["detail","상세내역"],["all","전체"]].map(([k,l])=>(
<button key={k} onClick={()=>setPt(k)} style={{padding:"6px 16px",background:pt===k?"#4f46e5":"transparent",color:"#fff",border:"none",cursor:"pointer",fontSize:12,fontWeight:pt===k?600:400}}>{l}</button>
))}
</div>
<div style={{flex:1}}/>
<button onClick={doPrint} style={{padding:"7px 18px",background:"#4f46e5",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:600}}>인쇄 / PDF</button>
</div>
<div style={{maxWidth:820,margin:"20px auto",padding:"0 16px"}}>
<div ref={ref} style={{background:"#fff",borderRadius:6,boxShadow:"0 8px 32px rgba(0,0,0,.4)",overflow:"hidden"}}>
{/* COVER */}
{(pt==="cover"||pt==="all")&&(
<div style={{minHeight:"100vh",display:"flex",flexDirection:"column",padding:40}}>
<div style={{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"}}>
<div style={{width:60,height:3,background:"#1a365d",marginBottom:40,borderRadius:2}}/>
<div style={{fontSize:32,letterSpacing:14,color:"#1a365d",fontWeight:700,marginBottom:10}}>견 적 서</div>
<div style={{fontSize:13,color:"#9ca3af",marginBottom:60,letterSpacing:4}}>QUOTATION</div>
<div style={{fontSize:18,fontWeight:600,marginBottom:6}}>{info.org||"의뢰기관명"}</div>
{info.person&&<div style={{fontSize:14,color:"#6b7280"}}>{info.person} 귀하</div>}
<div style={{width:180,height:1,background:"#d1d5db",margin:"36px 0"}}/>
<table style={{width:300,borderCollapse:"collapse",fontSize:12,textAlign:"left"}}>
<tbody>
{[["견적번호",info.qn],["발행일",ds],["시험물질",info.substance||"-"],["제출목적",mode==="cos_alt"?"화장품(대체법) 독성시험":(mode==="cos_stem"?"화장품(줄기세포배양액) 독성시험":(isDoc?(mode==="doc_send"?"SEND 데이터 변환":mode==="doc_ctd"?"CTD Module 2.6 작성":"영문보고서 번역"):(isCellTx?"세포치료제 비임상시험":(isMD?"의료기기 생물학적 안전성시험":(mode==="drug_screen_cv"?"안전성약리 심혈관계 스크리닝":(mode==="drug_screen_tox"?"독성 스크리닝 시험":(isVaccine?"백신 독성시험":(isCombo?`복합제(${comboType}종) 독성시험`:(isHF?(mode==="hf_prob"?"건강기능식품 프로바이오틱스 독성시험":mode==="hf_temp"?"건강기능식품 한시적식품 독성시험":"건강기능식품 개별인정형 독성시험"):info.purpose)))))))))],["시험기준",isDoc?"-":(isCellTx?"KGLP":(isMD?"KGLP":(isSimple?(mode==="drug_screen_cv"?"KGLP (MEA: GLP)":"non-GLP"):isDrug?std:"KGLP")))],["투여경로",isDoc?"-":(isCellTx?"-":(isCos?"-":(isMD?"-":(isScreen?"-":(isVaccine?"근육":(isCombo?"경구":(isHF?hfRoute:route))))))]].map(([l,v])=>(
<tr key={l}><td style={{padding:"5px 10px",color:"#6b7280",width:90,border:"none"}}>{l}</td><td style={{padding:"5px 10px",fontWeight:600,border:"none"}}>{v}</td></tr>
))}
</tbody>
</table>
</div>
<div style={{textAlign:"center",color:"#6b7280",fontSize:11}}>
<div style={{fontWeight:700,fontSize:14,color:"#1a365d",marginBottom:3}}>코아스템켐온㈜</div>
<div>경기도 용인시 처인구 양지면 남평로 240 | 비임상CRO사업부</div>
</div>
</div>
)}
{/* QUOTE */}
{(pt==="quote"||pt==="all")&&(
<div className="pb" style={{padding:30,minHeight:"100vh"}}>
<div style={{display:"flex",justifyContent:"space-between",marginBottom:20}}>
<div><div style={{fontSize:18,fontWeight:700,color:"#1a365d",letterSpacing:6}}>견 적 서</div><div style={{fontSize:10,color:"#9ca3af"}}>{info.qn} · {std}</div></div>
<div style={{textAlign:"right",fontSize:11,lineHeight:1.8}}><div style={{fontWeight:700,color:"#1a365d"}}>코아스템켐온㈜</div><div style={{color:"#6b7280"}}>{ds}</div></div>
</div>
<div style={{display:"flex",gap:16,marginBottom:18}}>
<table style={{flex:1,borderCollapse:"collapse",fontSize:11}}>
<tbody>
{[["의뢰기관",info.org],["의뢰자",info.person],["연락처",info.contact],["E-mail",info.email]].map(([l,v])=>(
<tr key={l}><td style={{padding:"4px 8px",background:"#f8fafc",fontWeight:500,width:70,border:"1px solid #d1d5db"}}>{l}</td><td style={{padding:"4px 8px",border:"1px solid #d1d5db"}}>{v||"-"}</td></tr>
))}
</tbody>
</table>
<div style={{flex:1,border:"2px solid #1a365d",borderRadius:8,padding:14,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"}}>
<div style={{fontSize:10,color:"#6b7280",marginBottom:6}}>최종 견적가 (VAT 별도)</div>
<div style={{fontSize:26,fontWeight:800,color:"#1a365d"}}>{fmt(tot)}원</div>
{formulationPrice>0&&<div style={{fontSize:10,color:"#059669",marginTop:2}}>조제물분석 {fmt(formulationPrice)}원 포함</div>}
{da>0&&<div style={{fontSize:11,color:"#dc2626",marginTop:2}}>할인 {dt==="percent"?`${disc}%`:fmt(disc)+"원"} 적용</div>}
</div>
</div>
<table style={{width:"100%",borderCollapse:"collapse",fontSize:10}}>
<thead><tr>{["No","시험 항목","카테고리","동물종","투여경로","기간(주)","가격(원)"].map(h=><th key={h} style={{border:"1px solid #9ca3af",padding:"6px 4px",background:"#1a365d",color:"#fff",fontWeight:500,textAlign:"center"}}>{h}</th>)}</tr></thead>
<tbody>
{formulationPrice>0&&<tr style={{background:"#f0fdf4"}}>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center",width:28}}>-</td>
<td style={{border:"1px solid #d1d5db",padding:"4px 8px",textAlign:"left",fontWeight:500,color:"#059669"}}>투여물질의 조제물 분석 (자동산출)</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center",fontSize:9}}>조제물분석</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center"}}>-</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center"}}>-</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center"}}>-</td>
<td style={{border:"1px solid #d1d5db",padding:"4px 8px",textAlign:"right",fontWeight:600,color:"#059669"}}>{fmt(formulationPrice)}</td>
</tr>}
{si.map((it,i)=><tr key={it.id} style={{background:(i+(formulationPrice>0?1:0))%2?"#f9fafb":"#fff"}}>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center",width:28}}>{i+1}</td>
<td style={{border:"1px solid #d1d5db",padding:"4px 8px",textAlign:"left"}}>{isSimple?(it.fn||it.n):(FN[it.id]||it.n)}</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center",fontSize:9}}>{it.c}</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center"}}>{it.s}</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center"}}>{gr(it)}</td>
<td style={{border:"1px solid #d1d5db",padding:"4px",textAlign:"center"}}>{gw(it)??"-"}</td>
<td style={{border:"1px solid #d1d5db",padding:"4px 8px",textAlign:"right",fontWeight:500}}>{fmt(gp(it))}</td>
</tr>)}
</tbody>
<tfoot>
<tr style={{background:"#f1f5f9"}}><td colSpan={6} style={{border:"1px solid #c8c8c8",padding:"6px 8px",textAlign:"right",fontWeight:600}}>소계</td><td style={{border:"1px solid #c8c8c8",padding:"6px 8px",textAlign:"right",fontWeight:600}}>{fmt(subAll)}원</td></tr>
{da>0&&<tr style={{background:"#fef2f2"}}><td colSpan={6} style={{border:"1px solid #c8c8c8",padding:"6px 8px",textAlign:"right",fontWeight:600,color:"#dc2626"}}>할인</td><td style={{border:"1px solid #c8c8c8",padding:"6px 8px",textAlign:"right",fontWeight:600,color:"#dc2626"}}>-{fmt(da)}원</td></tr>}
<tr style={{background:"#1a365d"}}><td colSpan={6} style={{border:"1px solid #1a365d",padding:"8px",textAlign:"right",fontWeight:700,color:"#fff"}}>견적가 (VAT 별도)</td><td style={{border:"1px solid #1a365d",padding:"8px",textAlign:"right",fontWeight:700,color:"#fff",fontSize:13}}>{fmt(tot)}원</td></tr>
<tr><td colSpan={6} style={{border:"1px solid #c8c8c8",padding:"5px 8px",textAlign:"right",color:"#6b7280"}}>VAT(10%)</td><td style={{border:"1px solid #c8c8c8",padding:"5px 8px",textAlign:"right",color:"#6b7280"}}>{fmt(vat)}원</td></tr>
<tr><td colSpan={6} style={{border:"1px solid #c8c8c8",padding:"6px 8px",textAlign:"right",fontWeight:700}}>합계(VAT포함)</td><td style={{border:"1px solid #c8c8c8",padding:"6px 8px",textAlign:"right",fontWeight:700}}>{fmt(tot+vat)}원</td></tr>
</tfoot>
</table>
<div style={{marginTop:16,padding:12,background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10,lineHeight:1.8}}>
<div style={{fontWeight:700,marginBottom:3}}>공통 유의사항</div>
{["모든 금액은 VAT 별도입니다.","본 견적서는 발행일로부터 60일간 유효합니다.","시험개시는 시험의뢰서, 시험물질 정보기록지, CoA 접수 후 진행됩니다.","명시된 시험기간은 동물입고일~최종보고서(안) 제출일입니다.","번역보고서 작성 시 비용 추가됩니다.","시험물질은 멸균상태로 제공해야 합니다."].map((t,i)=><div key={i}>· {t}</div>)}
</div>
</div>
)}
{/* DETAIL */}
{(pt==="detail"||pt==="all")&&(
<div className="pb" style={{padding:30}}>
<div style={{fontSize:18,fontWeight:700,color:"#1a365d",letterSpacing:4,marginBottom:3}}>시험항목 상세내역</div>
<div style={{fontSize:10,color:"#9ca3af",marginBottom:20}}>DETAILED TEST SPECIFICATIONS — {info.qn}</div>
{si.map((it,i)=>(
<div key={it.id} style={{marginBottom:12,border:"1px solid #d1d5db",borderRadius:6,overflow:"hidden"}}>
<div style={{background:"#f1f5f9",padding:"7px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #d1d5db"}}>
<div style={{display:"flex",alignItems:"center",gap:6}}>
<span style={{fontSize:11,fontWeight:700,color:"#1a365d"}}>{i+1}. {isSimple?(it.fn||it.n):(FN[it.id]||it.n)}</span>
<span style={bd(CC[it.c]||"#475569")}>{it.c}</span>
</div>
<span style={{fontSize:11,fontWeight:700,color:"#1a365d"}}>{fmt(gp(it))}원</span>
</div>
{(()=>{const g=isSimple?it.gl:GL[it.id];return g&&(g[0]||g[1]||g[2])?(
<div style={{padding:"5px 14px",background:"#f8fafc",borderBottom:"1px solid #e5e7eb",display:"flex",gap:8,flexWrap:"wrap"}}>
{g[0]&&<span style={{fontSize:8,padding:"2px 6px",borderRadius:3,background:"#dcfce7",color:"#166534",fontWeight:500}}>{g[0]}</span>}
{g[1]&&<span style={{fontSize:8,padding:"2px 6px",borderRadius:3,background:"#dbeafe",color:"#1e40af",fontWeight:500}}>{g[1]}</span>}
{g[2]&&<span style={{fontSize:8,padding:"2px 6px",borderRadius:3,background:"#fef3c7",color:"#92400e",fontWeight:500}}>{g[2]}</span>}
</div>
):null;})()}
<div style={{padding:"10px 14px",display:"flex",gap:16}}>
<div style={{flex:1}}>
<div style={{fontSize:9,fontWeight:600,color:"#9ca3af",marginBottom:3,textTransform:"uppercase",letterSpacing:1}}>시험 개요</div>
{(()=>{const g=isSimple?it.gl:GL[it.id];return g&&g[3]?<div style={{fontSize:10,color:"#1a365d",marginBottom:4,fontWeight:500}}>{g[3]}</div>:null;})()}
<div style={{fontSize:10,whiteSpace:"pre-line",lineHeight:1.7,color:"#374151"}}>{it.desc}</div>
{memo[it.id]&&<div style={{marginTop:6,padding:6,background:"#fffbeb",border:"1px solid #fde68a",borderRadius:4,fontSize:9,color:"#92400e"}}>비고: {memo[it.id]}</div>}
</div>
<div style={{width:130,flexShrink:0}}>
<table style={{width:"100%",borderCollapse:"collapse",fontSize:10}}>
<tbody>
{[["동물종",it.s],["투여경로",gr(it)],["투여기간",it.d],["시험기간",gw(it)?`${gw(it)}주`:"-"]].map(([l,v])=>(
<tr key={l}><td style={{padding:"3px 4px",color:"#9ca3af",fontSize:9,borderBottom:"1px solid #f1f5f9"}}>{l}</td><td style={{padding:"3px 4px",fontWeight:500,borderBottom:"1px solid #f1f5f9"}}>{v||"-"}</td></tr>
))}
</tbody>
</table>
</div>
</div>
</div>
))}
</div>
)}
</div>
</div>
</div>
);
}

// ===== EDIT MODE =====
const inp={width:"100%",padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:6,fontSize:12,outline:"none",background:"#fff"};
const pill=(on,clr)=>({padding:"3px 12px",borderRadius:14,border:on?"none":"1px solid #d1d5db",background:on?(clr||"#1a365d"):"#fff",color:on?"#fff":"#6b7280",cursor:"pointer",fontSize:11,fontWeight:500});
const chk=on=>({width:18,height:18,borderRadius:4,border:on?"none":"2px solid #c8c8c8",background:on?"#4f46e5":"#fff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginTop:2});

// Mode selector screen
if(!mode||mode==="hf"||mode==="drug"||mode==="drug_screen"||mode==="md"||mode==="cos"||mode==="doc") return(
<div style={{minHeight:"100vh",background:"linear-gradient(135deg,#0f172a,#1e293b)",fontFamily:"'Noto Sans KR',system-ui,sans-serif",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:24}}>
<div style={{textAlign:"center",color:"#fff",marginBottom:16}}>
<div style={{fontSize:28,fontWeight:800,letterSpacing:3,marginBottom:4}}>비임상독성시험 견적서 생성기</div>
<div style={{fontSize:13,opacity:.5}}>코아스템켐온 비임상CRO사업부 · 2026</div>






{SUB[mode]&&<div style={{marginTop:12,fontSize:14,color:SUB_CLR[mode]}}>{SUB[mode]} — 하위 카테고리를 선택하세요</div>}
</div>
{(mode==="hf"||mode==="drug"||mode==="md"||mode==="cos"||mode==="doc")&&<button onClick={()=>setMode("")} style={{background:"rgba(255,255,255,.1)",border:"none",borderRadius:6,padding:"6px 16px",cursor:"pointer",color:"#fff",fontSize:12,marginBottom:8}}>← 처음으로</button>}
{mode==="drug_screen"&&<button onClick={()=>setMode("drug")} style={{background:"rgba(255,255,255,.1)",border:"none",borderRadius:6,padding:"6px 16px",cursor:"pointer",color:"#fff",fontSize:12,marginBottom:8}}>← 의약품으로</button>}
<div style={{display:"flex",gap:20,flexWrap:"wrap",justifyContent:"center"}}>
{(NAV[mode||"top"]||[]).map((c,i)=><C key={i} {...c}/>)}
</div>
</div>
);

return(
<div style={{minHeight:"100vh",background:"#f0f2f5",fontFamily:"'Noto Sans KR',system-ui,sans-serif",color:"#1a1a1a"}}>
<div style={{background:"linear-gradient(135deg,#1a365d,#2d4a7a)",color:"#fff",padding:"12px 24px",display:"flex",alignItems:"center",justifyContent:"space-between"}}>
<div style={{display:"flex",alignItems:"center",gap:12}}>
<button onClick={()=>{const parent=isHF?"hf":isScreen?"drug_screen":isMD?"md":isCos?"cos":isDoc?"doc":isCellTx?"drug":(isDrug||isCombo||isVaccine)?"drug":"";setMode(parent);setSel({});setOpts({});setPage("edit");}} style={{background:"rgba(255,255,255,.1)",border:"none",borderRadius:6,padding:"5px 10px",cursor:"pointer",color:"#fff",fontSize:11}}>← 돌아가기</button>
<div>
<div style={{display:"flex",alignItems:"center",gap:8}}>
<span style={{fontSize:16,fontWeight:700,letterSpacing:2}}>독성시험 견적서 생성기</span>
<span style={{fontSize:11,padding:"2px 10px",borderRadius:10,background:isDoc?"#6366f1":isCellTx?"#b45309":isCos?"#db2777":isMD?"#0d9488":isScreen?"#ea580c":isVaccine?"#0891b2":isCombo?"#7c3aed":isHF?"#059669":"#2563eb",fontWeight:600}}>{modeLabel}</span>
</div>
<div style={{fontSize:10,opacity:.5}}>코아스템켐온 비임상CRO · 2026</div>
</div>
</div>
<div style={{display:"flex",gap:8,alignItems:"center"}}>
{si.length>0&&<div style={{background:"rgba(255,255,255,.1)",borderRadius:16,padding:"5px 14px",fontSize:11}}><span style={{opacity:.7}}>{si.length}개</span> · <strong>{fmt(tot)}원</strong></div>}
<button onClick={()=>si.length>0&&setPage("preview")} disabled={!si.length} style={{padding:"7px 18px",background:si.length?"#f59e0b":"#475569",color:"#fff",border:"none",borderRadius:6,cursor:si.length?"pointer":"default",fontWeight:600,fontSize:12,opacity:si.length?1:.4}}>견적서 미리보기</button>
</div>
</div>
<div style={{display:"flex",maxWidth:1440,margin:"0 auto",height:"calc(100vh - 52px)"}}>
{/* LEFT */}
<div style={{flex:1,display:"flex",flexDirection:"column",borderRight:"1px solid #e2e8f0"}}>
<div style={{padding:"10px 16px",background:"#fff",borderBottom:"1px solid #e2e8f0"}}>
<div style={{display:"flex",gap:8,marginBottom:8,flexWrap:"wrap"}}>
{isDrug&&<div style={{display:"flex",background:"#e5e7eb",borderRadius:6,overflow:"hidden"}}>
{["경구피하근육","정맥경피"].map(r=><button key={r} onClick={()=>setRoute(r)} style={{padding:"5px 14px",background:route===r?"#1a365d":"transparent",color:route===r?"#fff":"#4b5563",border:"none",cursor:"pointer",fontSize:12,fontWeight:500}}>{r}</button>)}
</div>}
{isDrug&&<div style={{display:"flex",background:"#e5e7eb",borderRadius:6,overflow:"hidden"}}>
{["KGLP","KGLP,OECD"].map(s=><button key={s} onClick={()=>setStd(s)} style={{padding:"5px 14px",background:std===s?"#059669":"transparent",color:std===s?"#fff":"#4b5563",border:"none",cursor:"pointer",fontSize:12,fontWeight:500}}>{s}</button>)}
</div>}
{isCombo&&<div style={{display:"flex",background:"#ede9fe",borderRadius:6,overflow:"hidden"}}>
{[2,3,4].map(n=><button key={n} onClick={()=>{setComboType(n);setSel({});}} style={{padding:"5px 16px",background:comboType===n?"#7c3aed":"transparent",color:comboType===n?"#fff":"#6b21a8",border:"none",cursor:"pointer",fontSize:12,fontWeight:600}}>{n}종 복합</button>)}
</div>}
{isCombo&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#f5f3ff",borderRadius:6,border:"1px solid #c4b5fd"}}>
<span style={{fontSize:11,color:"#7c3aed",fontWeight:600}}>KGLP · 경구</span>
</div>}
{isVaccine&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#ecfeff",borderRadius:6,border:"1px solid #a5f3fc"}}>
<span style={{fontSize:11,color:"#0891b2",fontWeight:600}}>KGLP · 근육</span>
</div>}
{isScreen&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#fff7ed",borderRadius:6,border:"1px solid #fed7aa"}}>
<span style={{fontSize:11,color:"#ea580c",fontWeight:600}}>{mode==="drug_screen_cv"?"심혈관계 · Screening":"독성시험 · non-GLP"}</span>
</div>}
{isMD&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#f0fdfa",borderRadius:6,border:"1px solid #99f6e4"}}>
<span style={{fontSize:11,color:"#0d9488",fontWeight:600}}>KGLP · ISO 10993</span>
</div>}
{isCos&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#fdf2f8",borderRadius:6,border:"1px solid #fbcfe8"}}>
<span style={{fontSize:11,color:"#db2777",fontWeight:600}}>KGLP · 화장품</span>
</div>}
{isCellTx&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#fffbeb",borderRadius:6,border:"1px solid #fde68a"}}>
<span style={{fontSize:11,color:"#b45309",fontWeight:600}}>KGLP · 세포치료제</span>
</div>}
{isDoc&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#eef2ff",borderRadius:6,border:"1px solid #c7d2fe"}}>
<span style={{fontSize:11,color:"#6366f1",fontWeight:600}}>{mode==="doc_send"?"SEND 변환":mode==="doc_ctd"?"CTD Module 2.6":"영문 번역"}</span>
</div>}
{isHF&&<div style={{display:"flex",alignItems:"center",gap:6,background:"#f0fdf4",padding:"4px 12px",borderRadius:6,border:"1px solid #bbf7d0"}}>
<span style={{fontSize:11,color:"#059669",fontWeight:600}}>투여경로</span>
<input value={hfRoute} onChange={e=>setHfRoute(e.target.value)} style={{...inp,width:100,fontSize:11,padding:"3px 8px"}} placeholder="경구, 정맥 등"/>
</div>}
{isHF&&<div style={{display:"flex",alignItems:"center",padding:"4px 12px",background:"#f0fdf4",borderRadius:6,border:"1px solid #bbf7d0"}}>
<span style={{fontSize:11,color:"#059669",fontWeight:600}}>KGLP</span>
</div>}
<input value={search} onChange={e=>setSearch(e.target.value)} placeholder="시험항목 검색..." style={{...inp,flex:1,minWidth:140}}/>
</div>
<div style={{display:"flex",gap:4,flexWrap:"wrap"}}>
{curCats.map(c=><button key={c} onClick={()=>setCat(c)} style={pill(cat===c,CC[c]||"7c3aed")}>{c}</button>)}
</div>
</div>
<div style={{flex:1,overflow:"auto",padding:"6px 12px"}}>
{!fl.length&&<div style={{textAlign:"center",padding:40,color:"#9ca3af"}}>검색 결과 없음</div>}
{fl.map(it=>{const on=!!sel[it.id],p=gp(it),tree=isDrug&&TR[it.id],opt=opts[it.id];
const hasScope=tree?.tk&&Object.keys(tree.tk).length>1;
const hasCnt=tree?.tk&&opt&&tree.tk[opt.tkScope]&&tree.tk[opt.tkScope][opt.tkPt]&&typeof tree.tk[opt.tkScope][opt.tkPt]==="object";
return(
<div key={it.id} style={{marginBottom:4,borderRadius:8,border:on?"1.5px solid #4f46e5":"1px solid #e5e7eb",overflow:"hidden"}}>
<div onClick={()=>tgl(it.id)} style={{display:"flex",alignItems:"flex-start",gap:10,padding:"9px 12px",background:on?"#eef2ff":"#fff",cursor:"pointer"}}>
<div style={chk(on)}>{on&&<svg width="12" height="12" viewBox="0 0 12 12"><path d="M2 6l3 3 5-5" stroke="#fff" strokeWidth="2" fill="none"/></svg>}</div>
<div style={{flex:1,minWidth:0}}>
<div style={{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"}}>
<span style={{fontSize:12,fontWeight:600}}>{it.n}</span>
<span style={{fontSize:9,padding:"1px 8px",borderRadius:10,background:CC[it.c],color:"#fff",fontWeight:500}}>{it.c}</span>
{IM[it.id]&&IM[it.id][0]===1&&<span style={{fontSize:8,padding:"1px 6px",borderRadius:8,background:"#dbeafe",color:"#1d4ed8",fontWeight:600}}>in vivo</span>}
{IM[it.id]&&IM[it.id][0]===2&&<span style={{fontSize:8,padding:"1px 6px",borderRadius:8,background:"#fce7f3",color:"#be185d",fontWeight:600}}>in vitro</span>}
{tree&&<span style={{fontSize:8,padding:"1px 6px",borderRadius:8,background:"#fef3c7",color:"#92400e",fontWeight:500}}>옵션</span>}
</div>
<div style={{fontSize:10,color:"#9ca3af",marginTop:2}}>
{it.s!=="-"&&<span style={{marginRight:8}}>{it.s}</span>}
{it.d!=="-"&&<span style={{marginRight:8}}>{it.d}</span>}
{gr(it)!=="-"&&<span>{gr(it)}</span>}
</div>
</div>
<div style={{textAlign:"right",flexShrink:0}}>
<div style={{fontSize:13,fontWeight:700,color:p?"#1a1a1a":"#9ca3af"}}>{p?fmt(p):"협의"}</div>
{gw(it)&&gw(it)!=="-"&&<div style={{fontSize:10,color:"#b0b0b0"}}>{gw(it)}주</div>}
</div>
</div>
{/* Option Tree UI */}
{on&&tree&&opt&&(
<div onClick={e=>e.stopPropagation()} style={{background:"#f8fafc",padding:"8px 12px 10px 38px",borderTop:"1px dashed #c7d2fe",display:"flex",flexDirection:"column",gap:6}}>
{/* 회복시험 */}
{tree.rec&&(()=>{const recItem=D.find(d=>d.id===tree.rec);return(
<div style={{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8}}>
<label style={{display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:11}}>
<div onClick={()=>{const n={...opt,rec:!opt.rec};syncOpts(it.id,n);}} style={{width:16,height:16,borderRadius:3,border:"2px solid "+(opt.rec?"#059669":"#d1d5db"),background:opt.rec?"#059669":"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}}>
{opt.rec&&<svg width="10" height="10" viewBox="0 0 12 12"><path d="M2 6l3 3 5-5" stroke="#fff" strokeWidth="2" fill="none"/></svg>}
</div>
<span style={{fontWeight:500,color:opt.rec?"#059669":"#6b7280"}}>회복시험 추가</span>
{recItem&&<span style={{fontSize:10,color:"#9ca3af"}}>({recItem.n})</span>}
</label>
{opt.rec&&recItem&&<span style={{fontSize:11,fontWeight:600,color:"#059669"}}>+{fmt(gp(recItem))}원</span>}
</div>
);})()}
{/* TK - standard tree */}
{tree.tk&&(()=>{
const scopes=Object.keys(tree.tk);
return(
<div>
<div style={{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8}}>
<label style={{display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:11}}>
<div onClick={()=>{const n={...opt,tk:!opt.tk};syncOpts(it.id,n);}} style={{width:16,height:16,borderRadius:3,border:"2px solid "+(opt.tk?"#7c3aed":"#d1d5db"),background:opt.tk?"#7c3aed":"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}}>
{opt.tk&&<svg width="10" height="10" viewBox="0 0 12 12"><path d="M2 6l3 3 5-5" stroke="#fff" strokeWidth="2" fill="none"/></svg>}
</div>
<span style={{fontWeight:500,color:opt.tk?"#7c3aed":"#6b7280"}}>독성동태(TK) 추가</span>
</label>
{opt.tk&&(()=>{const rid=resolveTK(tree.tk,opt.tkScope,opt.tkPt,opt.tkCnt);const ri=rid&&D.find(d=>d.id===rid);return ri?<span style={{fontSize:11,fontWeight:600,color:"#7c3aed"}}>+{fmt(gp(ri))}원</span>:null;})()}
</div>
{opt.tk&&(
<div style={{marginTop:4,marginLeft:22,display:"flex",flexDirection:"column",gap:4}}>
{/* 범위 */}
{scopes.length>1&&<div style={{display:"flex",alignItems:"center",gap:6}}>
<span style={{fontSize:10,color:"#9ca3af",width:40}}>범위</span>
<div style={{display:"flex",background:"#e5e7eb",borderRadius:4,overflow:"hidden"}}>
{scopes.map(s=><button key={s} onClick={()=>{const n={...opt,tkScope:s};syncOpts(it.id,n);}} style={{padding:"3px 10px",background:opt.tkScope===s?"#7c3aed":"transparent",color:opt.tkScope===s?"#fff":"#6b7280",border:"none",cursor:"pointer",fontSize:10,fontWeight:500}}>{s}</button>)}
</div>
</div>}
{/* 포인트 */}
<div style={{display:"flex",alignItems:"center",gap:6}}>
<span style={{fontSize:10,color:"#9ca3af",width:40}}>포인트</span>
<div style={{display:"flex",background:"#e5e7eb",borderRadius:4,overflow:"hidden"}}>
{Object.keys(tree.tk[opt.tkScope]||{}).map(pt=><button key={pt} onClick={()=>{const n={...opt,tkPt:pt};syncOpts(it.id,n);}} style={{padding:"3px 10px",background:opt.tkPt===pt?"#7c3aed":"transparent",color:opt.tkPt===pt?"#fff":"#6b7280",border:"none",cursor:"pointer",fontSize:10,fontWeight:500}}>{pt}</button>)}
</div>
</div>
{/* 횟수 (13주+) */}
{hasCnt&&<div style={{display:"flex",alignItems:"center",gap:6}}>
<span style={{fontSize:10,color:"#9ca3af",width:40}}>횟수</span>
<div style={{display:"flex",background:"#e5e7eb",borderRadius:4,overflow:"hidden"}}>
{Object.keys(tree.tk[opt.tkScope][opt.tkPt]).map(c=><button key={c} onClick={()=>{const n={...opt,tkCnt:c};syncOpts(it.id,n);}} style={{padding:"3px 10px",background:opt.tkCnt===c?"#7c3aed":"transparent",color:opt.tkCnt===c?"#fff":"#6b7280",border:"none",cursor:"pointer",fontSize:10,fontWeight:500}}>{c}</button>)}
</div>
</div>}
</div>
)}
</div>);
})()}
{/* TK list (생식독성) */}
{tree.tk_list&&tree.tk_list.map(tid=>{const ti=D.find(d=>d.id===tid);const isOn=opt.tkToggles&&opt.tkToggles[tid];return ti?(
<div key={tid} style={{display:"flex",alignItems:"center",justifyContent:"space-between"}}>
<label style={{display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:11}}>
<div onClick={()=>{const n={...opt,tkToggles:{...opt.tkToggles,[tid]:!isOn}};syncOpts(it.id,n);}} style={{width:16,height:16,borderRadius:3,border:"2px solid "+(isOn?"#7c3aed":"#d1d5db"),background:isOn?"#7c3aed":"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}}>
{isOn&&<svg width="10" height="10" viewBox="0 0 12 12"><path d="M2 6l3 3 5-5" stroke="#fff" strokeWidth="2" fill="none"/></svg>}
</div>
<span style={{fontWeight:500,color:isOn?"#7c3aed":"#6b7280"}}>{ti.n}</span>
</label>
{isOn&&<span style={{fontSize:11,fontWeight:600,color:"#7c3aed"}}>+{fmt(gp(ti))}원</span>}
</div>
):null;})}
{/* TK simple (발암성) */}
{tree.tk_simple&&(()=>{const ti=D.find(d=>d.id===tree.tk_simple);return ti?(
<div style={{display:"flex",alignItems:"center",justifyContent:"space-between"}}>
<label style={{display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:11}}>
<div onClick={()=>{const n={...opt,tkSimple:!opt.tkSimple};syncOpts(it.id,n);}} style={{width:16,height:16,borderRadius:3,border:"2px solid "+(opt.tkSimple?"#7c3aed":"#d1d5db"),background:opt.tkSimple?"#7c3aed":"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}}>
{opt.tkSimple&&<svg width="10" height="10" viewBox="0 0 12 12"><path d="M2 6l3 3 5-5" stroke="#fff" strokeWidth="2" fill="none"/></svg>}
</div>
<span style={{fontWeight:500,color:opt.tkSimple?"#7c3aed":"#6b7280"}}>{ti.n}</span>
</label>
{opt.tkSimple&&<span style={{fontSize:11,fontWeight:600,color:"#7c3aed"}}>+{fmt(gp(ti))}원</span>}
</div>
):null;})()}
</div>
)}
</div>
);})}
</div>
</div>
{/* RIGHT */}
<div style={{width:370,background:"#fff",display:"flex",flexDirection:"column"}}>
<div style={{padding:"10px 16px",borderBottom:"1px solid #e2e8f0"}}>
<div style={{fontSize:12,fontWeight:700,color:"#1a365d",marginBottom:6}}>의뢰 정보</div>
<div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4}}>
{[["qn","견적번호",true],["org","의뢰기관",true],["person","의뢰자"],["contact","연락처"],["email","E-mail"],["substance","시험물질",true]].map(([k,l,wide])=>(
<input key={k} value={info[k]} onChange={e=>setInfo(p=>({...p,[k]:e.target.value}))} placeholder={l} style={{...inp,fontSize:11,padding:"5px 8px",gridColumn:wide?"1/3":undefined}}/>
))}
</div>
</div>
<div style={{padding:"6px 16px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"}}>
<span style={{fontSize:12,fontWeight:700}}>선택 항목 ({si.length})</span>
{si.length>0&&<button onClick={()=>{setSel({});setOpts({});}} style={{fontSize:10,color:"#dc2626",background:"none",border:"none",cursor:"pointer"}}>전체 해제</button>}
</div>
<div style={{flex:1,overflow:"auto",padding:"4px 12px"}}>
{!si.length&&<div style={{textAlign:"center",padding:30,color:"#b0b0b0",fontSize:12}}>왼쪽에서 시험항목을 선택하세요</div>}
{si.map((it,i)=>(
<div key={it.id} style={{borderBottom:"1px solid #f1f5f9",padding:"5px 2px"}}>
<div style={{display:"flex",alignItems:"center",justifyContent:"space-between"}}>
<div style={{display:"flex",alignItems:"center",gap:4,flex:1,minWidth:0,overflow:"hidden"}}>
<span style={{fontSize:10,color:"#9ca3af"}}>{i+1}</span>
<span style={{fontSize:11,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}>{it.n}</span>
</div>
<div style={{display:"flex",alignItems:"center",gap:4}}>
<span style={{fontSize:11,fontWeight:600,whiteSpace:"nowrap"}}>{fmt(gp(it))}</span>
<button onClick={()=>setExp(p=>({...p,[it.id]:!p[it.id]}))} style={{background:"none",border:"none",cursor:"pointer",fontSize:9,color:"#6b7280",padding:"2px"}}>{exp[it.id]?"▲":"▼"}</button>
<button onClick={()=>rm(it.id)} style={{background:"none",border:"none",cursor:"pointer",color:"#c8c8c8",fontSize:14}}>×</button>
</div>
</div>
{exp[it.id]&&<div style={{paddingLeft:16,marginTop:4}}>
<div style={{fontSize:10,color:"#6b7280",whiteSpace:"pre-line",lineHeight:1.5}}>{it.desc.split('\n').slice(0,3).join('\n')}</div>
<input value={memo[it.id]||""} onChange={e=>setMemo(p=>({...p,[it.id]:e.target.value}))} placeholder="비고 메모 입력..." style={{...inp,fontSize:10,padding:"3px 8px",marginTop:4}}/>
</div>}
</div>
))}
</div>
{/* 조제물분석 자동계산 */}
{si.length>0&&formulationPrice>0&&(
<div style={{padding:"10px 16px",borderTop:"1px solid #e2e8f0",background:"#f0fdf4"}}>
<div style={{fontSize:11,fontWeight:700,color:"#059669",marginBottom:4}}>투여물질의 조제물 분석 {isHF?"(고정가)":"(자동계산)"}</div>
{isHF?(
<div style={{display:"flex",justifyContent:"space-between",fontSize:10,color:"#374151"}}>
<span>조제물분석 (HPLC 균질성/안정성/함량)</span><span>{fmt(hfFormulation)}원</span>
</div>
):<>
{hasVivo&&<div style={{display:"flex",justifyContent:"space-between",fontSize:10,color:"#374151"}}>
<span>In vivo 조제물분석 ×1</span><span>{fmt(ASSAY_VIVO)}원</span>
</div>}
{hasVitro&&<div style={{display:"flex",justifyContent:"space-between",fontSize:10,color:"#374151"}}>
<span>In vitro 조제물분석 ×1</span><span>{fmt(ASSAY_VITRO)}원</span>
</div>}
{contentItems.length>0&&<div style={{marginTop:3,paddingTop:3,borderTop:"1px dashed #d1d5db"}}>
<div style={{fontSize:10,color:"#6b7280",marginBottom:2}}>함량분석 (4주당 1회, {fmt(CONTENT_UNIT)}원/회)</div>
{contentItems.map(i=>{const cnt=calcContentCount(i);return cnt>0?(
<div key={i.id} style={{display:"flex",justifyContent:"space-between",fontSize:10,color:"#374151"}}>
<span style={{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,marginRight:8}}>{i.n} ({i.d}→{cnt}회)</span>
<span style={{flexShrink:0}}>{fmt(cnt*CONTENT_UNIT)}원</span>
</div>
):null;})}
</div>}
</>}
<div style={{display:"flex",justifyContent:"space-between",marginTop:4,paddingTop:4,borderTop:"1px solid #bbf7d0",fontWeight:600,fontSize:11,color:"#059669"}}>
<span>조제물분석 합계</span><span>{fmt(formulationPrice)}원</span>
</div>
</div>
)}
<div style={{padding:"12px 16px",borderTop:"1px solid #e2e8f0",background:"#f8fafc"}}>
<div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
<span style={{fontSize:12}}>시험항목 소계</span><span style={{fontSize:13,fontWeight:600}}>{fmt(sub)}원</span>
</div>
{formulationPrice>0&&<div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
<span style={{fontSize:12,color:"#059669"}}>조제물분석</span><span style={{fontSize:12,fontWeight:600,color:"#059669"}}>+{fmt(formulationPrice)}원</span>
</div>}
<div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
<span style={{fontSize:12,fontWeight:600}}>소계</span><span style={{fontSize:13,fontWeight:700}}>{fmt(subAll)}원</span>
</div>
<div style={{display:"flex",alignItems:"center",gap:6,marginBottom:6}}>
<span style={{fontSize:12,flexShrink:0}}>할인</span>
<div style={{display:"flex",background:"#e5e7eb",borderRadius:4,overflow:"hidden"}}>
<button onClick={()=>{setDt("percent");setDisc(0)}} style={{padding:"3px 8px",background:dt==="percent"?"#1a365d":"transparent",color:dt==="percent"?"#fff":"#6b7280",border:"none",cursor:"pointer",fontSize:10}}>%</button>
<button onClick={()=>{setDt("fixed");setDisc(0)}} style={{padding:"3px 8px",background:dt==="fixed"?"#1a365d":"transparent",color:dt==="fixed"?"#fff":"#6b7280",border:"none",cursor:"pointer",fontSize:10}}>원</button>
</div>
<input type="number" value={disc||""} onChange={e=>setDisc(Number(e.target.value))} placeholder="0" style={{...inp,width:80,textAlign:"right",padding:"4px 8px"}}/>
{dt==="percent"&&<span style={{fontSize:12,fontWeight:600,color:"#4f46e5"}}>{disc}%</span>}
</div>
{da>0&&<div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
<span style={{fontSize:12,color:"#dc2626"}}>할인액</span><span style={{fontSize:12,fontWeight:600,color:"#dc2626"}}>-{fmt(da)}원</span>
</div>}
<div style={{display:"flex",justifyContent:"space-between",padding:"8px 0",borderTop:"2px solid #1a365d",marginTop:4}}>
<span style={{fontSize:14,fontWeight:700}}>최종 견적가</span><span style={{fontSize:20,fontWeight:800,color:"#1a365d"}}>{fmt(tot)}원</span>
</div>
<div style={{display:"flex",justifyContent:"space-between"}}>
<span style={{fontSize:10,color:"#9ca3af"}}>VAT(10%): {fmt(vat)}원</span>
<span style={{fontSize:10,color:"#9ca3af"}}>합계: {fmt(tot+vat)}원</span>
</div>
</div>
</div>
</div>
</div>
);
}
