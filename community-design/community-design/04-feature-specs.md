# CHEMON 커뮤니티 모듈 - 기능별 상세 명세

---

## 4. 기능별 상세 명세

### 4.1 게시판 기본 구성

| 게시판 | 슬러그 | 타입 | 작성 권한 | 설명 |
|--------|--------|------|----------|------|
| 공지사항 | notice | NOTICE | ADMIN | 전체 공지 |
| 자유게시판 | free | FREE | USER | 일반 게시판 |
| 질문답변 | qna | QNA | USER | Q&A |
| 자료실 | resource | RESOURCE | USER | 파일 중심 |

### 4.2 게시글 작성 규칙

| 항목 | 제한 |
|------|------|
| 제목 | 2~100자 |
| 내용 | 10~50,000자 |
| 태그 | 최대 10개 |
| 첨부파일 | 게시판 설정 따름 |

### 4.3 댓글 구조

```
댓글 (depth: 0)
├── 대댓글 (depth: 1)
├── 대댓글 (depth: 1)
└── 대댓글 (depth: 1)

* 최대 1단계 (대대댓글 X)
* 멘션 지원: @[이름](userId)
```

### 4.4 조회수 중복 방지

- 로그인: userId 기준, 30분 쿨다운
- 비로그인: IP 기준 (선택적)

### 4.5 파일 업로드

**지원 형식**:
- 이미지: jpg, png, gif, webp
- 문서: pdf, doc, docx, xls, xlsx, ppt, pptx
- 기타: zip, txt, csv

**이미지 처리**:
- 썸네일 생성 (300x300)
- 최대 1920px 리사이징

### 4.6 검색

- PostgreSQL LIKE 또는 Full-Text Search
- 제목 + 내용 검색
- 하이라이트 표시

### 4.7 알림 트리거

| 이벤트 | 수신자 |
|--------|--------|
| 내 글에 댓글 | 글 작성자 |
| 내 댓글에 답글 | 댓글 작성자 |
| 멘션 | 멘션된 사용자 |
| 공지사항 | 전체 (선택) |

### 4.8 신고 처리

```
PENDING → REVIEWED → RESOLVED / DISMISSED
```

**처리 액션**: 숨김, 삭제, 경고, 정지

### 4.9 통계

- 일별 집계 (Cron)
- 게시글/댓글/조회수/활성사용자
- 게시판별 통계

---

## 5. 보안

- XSS: DOMPurify로 HTML 정제
- Rate Limit: 게시글 5/분, 댓글 10/분
- 권한: 작성자/관리자만 수정/삭제

---

## 6. 구현 일정

| Phase | 기간 | 내용 |
|-------|------|------|
| 1 | 1-2주 | 게시판/게시글/댓글 CRUD |
| 2 | 1주 | 파일, 좋아요, 태그, 검색 |
| 3 | 1주 | 알림, 신고, 통계, 관리자 |
| 4 | 1주 | 고도화, 최적화 |

---

## 7. 기술 스택

| 기능 | 라이브러리 |
|------|-----------|
| 에디터 | TipTap |
| 파일 업로드 | react-dropzone |
| 이미지 처리 | sharp |
| HTML 정제 | DOMPurify |

---

*문서 끝*
