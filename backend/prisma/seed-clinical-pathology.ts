// Clinical Pathology Seed Data
// ìž„ìƒë³‘ë¦¬ê²€ì‚¬ ë§ˆìŠ¤í„°ë°ì´í„° ì‹œë“œ

import { PrismaClient, ClinicalTestCategory, SampleType } from '@prisma/client';

const prisma = new PrismaClient();

const clinicalTestItems = [
  // ==================== CBC (ì¼ë°˜í˜ˆì•¡í•™) - íŒ¨í‚¤ì§€ ====================
  {
    category: ClinicalTestCategory.CBC,
    code: 'CBC',
    nameKr: 'CBC (ì¼ë°˜í˜ˆì•¡í•™)',
    nameEn: 'Complete Blood Count',
    unit: null,
    method: 'Flowcytometry',
    unitPrice: 50000,
    isPackage: true,
    packageItems: ['WBC', 'RBC', 'HGB', 'HCT', 'MCV', 'MCH', 'MCHC', 'RDW', 'HDW', 'PLT', 'MPV'],
    requiredSampleTypes: [SampleType.WHOLE_BLOOD],
    minSampleVolume: 200,
    requiresItem: null,
    displayOrder: 1,
  },
  
  // ==================== DIFF (ë°±í˜ˆêµ¬ê°ë³„) - íŒ¨í‚¤ì§€ ====================
  {
    category: ClinicalTestCategory.DIFF,
    code: 'DIFF',
    nameKr: 'DIFF (ë°±í˜ˆêµ¬ê°ë³„ê³„ìˆ˜)',
    nameEn: 'WBC Differential Count',
    unit: null,
    method: 'Flowcytometry, Peroxidase staining',
    unitPrice: 50000,
    isPackage: true,
    packageItems: ['NEU', 'LYM', 'MONO', 'EOS', 'BASO', 'LUC'],
    requiredSampleTypes: [SampleType.WHOLE_BLOOD],
    minSampleVolume: 200,
    requiresItem: 'CBC',
    displayOrder: 2,
  },
  
  // ==================== RETIC (ë§ìƒì í˜ˆêµ¬) ====================
  {
    category: ClinicalTestCategory.RETIC,
    code: 'RETIC',
    nameKr: 'RETIC (ë§ìƒì í˜ˆêµ¬)',
    nameEn: 'Reticulocyte',
    unit: '%',
    method: 'Flowcytometry, Isovolumetry',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.WHOLE_BLOOD],
    minSampleVolume: 200,
    requiresItem: null,
    displayOrder: 3,
  },
  
  // ==================== í˜ˆì•¡ìƒí™”í•™ - ì¼ë°˜ (10,000ì›/í•­ëª©) ====================
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'AST',
    nameKr: 'AST',
    nameEn: 'Aspartate aminotransferase',
    unit: 'U/L',
    method: 'Kinetic UVë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 10,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'ALT',
    nameKr: 'ALT',
    nameEn: 'Alanine aminotransferase',
    unit: 'U/L',
    method: 'Kinetic UVë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 11,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'ALP',
    nameKr: 'ALP',
    nameEn: 'Alkaline phosphatase',
    unit: 'U/L',
    method: 'Kinetic colourë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 12,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'BUN',
    nameKr: 'BUN',
    nameEn: 'Blood urea nitrogen',
    unit: 'mg/dL',
    method: 'Urease-UVë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 13,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'CRE',
    nameKr: 'CRE',
    nameEn: 'Creatinine',
    unit: 'mg/dL',
    method: 'Jaffeë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 14,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'GLU',
    nameKr: 'GLU',
    nameEn: 'Glucose',
    unit: 'mg/dL',
    method: 'Enzymatic UVë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 15,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'TCHO',
    nameKr: 'TCHO',
    nameEn: 'Total cholesterol',
    unit: 'mg/dL',
    method: 'Kinetic colourë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 16,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'TPRO',
    nameKr: 'TPRO',
    nameEn: 'Total protein',
    unit: 'g/L',
    method: 'Biuretë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 17,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'CPK',
    nameKr: 'CPK',
    nameEn: 'Creatine phosphokinase',
    unit: 'U/L',
    method: 'Kinetic UVë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 18,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'ALB',
    nameKr: 'ALB',
    nameEn: 'Albumin',
    unit: 'g/dL',
    method: 'BCG ë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 19,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'TBIL',
    nameKr: 'TBIL',
    nameEn: 'Total bilirubin',
    unit: 'mg/dL',
    method: 'Photometric colourë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 20,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'TG',
    nameKr: 'TG',
    nameEn: 'Triglyceride',
    unit: 'mg/dL',
    method: 'Enzyme colourë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 21,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'IP',
    nameKr: 'IP',
    nameEn: 'Inorganic phosphorus',
    unit: 'mg/dL',
    method: 'Photometric UVë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 22,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'CA',
    nameKr: 'Ca',
    nameEn: 'Calcium',
    unit: 'mg/dL',
    method: 'O-CPC ë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 23,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'AG_RATIO',
    nameKr: 'A/G ratio',
    nameEn: 'Albumin/Globulin ratio',
    unit: 'ratio',
    method: 'PRO, ALBë¡œ ì‚°ì¶œ',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 24,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_GENERAL,
    code: 'LDH',
    nameKr: 'LDH',
    nameEn: 'Lactate dehydrogenase',
    unit: 'U/L',
    method: 'Kinetic UVë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 25,
  },

  // ==================== ì „í•´ì§ˆ - íŒ¨í‚¤ì§€ (30,000ì›) ====================
  {
    category: ClinicalTestCategory.ELECTROLYTE,
    code: 'ELECTROLYTE',
    nameKr: 'ì „í•´ì§ˆ (Naâº/Kâº/Clâ»)',
    nameEn: 'Electrolytes (Sodium/Potassium/Chloride)',
    unit: 'mmol/L',
    method: 'ì´ì˜¨ ì„ íƒ ì „ê·¹ë²•',
    unitPrice: 30000,
    isPackage: true,
    packageItems: ['NA', 'K', 'CL'],
    requiredSampleTypes: [SampleType.SERUM, SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 30,
  },
  
  // ==================== í˜ˆì•¡ìƒí™”í•™ - ì¶”ê°€ (20,000ì›/í•­ëª©) ====================
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'LDL',
    nameKr: 'LDL',
    nameEn: 'Low density lipoprotein cholesterol',
    unit: 'mg/dL',
    method: 'Enzymatic colourë²•',
    unitPrice: 20000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 40,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'HDL',
    nameKr: 'HDL',
    nameEn: 'High density lipoprotein cholesterol',
    unit: 'mg/dL',
    method: 'Enzymatic colourë²•',
    unitPrice: 20000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 41,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'GGT',
    nameKr: 'Î³-GTP',
    nameEn: 'Gamma Glutamyl transpeptidase',
    unit: 'U/L',
    method: 'Kinetic colourë²•',
    unitPrice: 20000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 42,
  },
  
  // ==================== í˜ˆì•¡ìƒí™”í•™ - ì¶”ê°€ (30,000ì›/í•­ëª©) ====================
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'CRP',
    nameKr: 'CRP',
    nameEn: 'C-reactive protein',
    unit: 'mg/L',
    method: 'Immunoturbidimetric',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 50,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'UA',
    nameKr: 'UA',
    nameEn: 'Uric acid',
    unit: 'mg/dL',
    method: 'Enzymatic colourë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 51,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'MA',
    nameKr: 'MA',
    nameEn: 'Magnesium',
    unit: 'mg/dL',
    method: 'Xylidyl blueë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 52,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'BICABO',
    nameKr: 'BICABO',
    nameEn: 'Bicarbonate',
    unit: 'mmol/L',
    method: 'Enzymaticë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 53,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'CRP_L',
    nameKr: 'CRP-L',
    nameEn: 'C-reactive protein - Latex',
    unit: 'mg/L',
    method: 'Latex immunoturbidimetric',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM],
    minSampleVolume: 300,
    displayOrder: 54,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'MICRO_ALB',
    nameKr: 'micro-ALB',
    nameEn: 'Micro Albumin',
    unit: 'mg/L',
    method: 'Immunoturbidimetric',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.SERUM, SampleType.URINE],
    minSampleVolume: 300,
    displayOrder: 55,
  },
  {
    category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL,
    code: 'HBA1C',
    nameKr: 'HbA1c',
    nameEn: 'Hemoglobin A1c',
    unit: '%',
    method: 'HPLC',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.WHOLE_BLOOD],
    minSampleVolume: 200,
    displayOrder: 56,
  },
  
  // ==================== í˜ˆì•¡ì‘ê³ ê²€ì‚¬ (10,000ì›/í•­ëª©) ====================
  {
    category: ClinicalTestCategory.COAGULATION,
    code: 'PT',
    nameKr: 'PT',
    nameEn: 'Prothrombin Time',
    unit: 'sec',
    method: 'Clottingë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 60,
  },
  {
    category: ClinicalTestCategory.COAGULATION,
    code: 'APTT',
    nameKr: 'APTT',
    nameEn: 'Activated Partial Thromboplastin Time',
    unit: 'sec',
    method: 'Clottingë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 61,
  },
  {
    category: ClinicalTestCategory.COAGULATION,
    code: 'FIB',
    nameKr: 'FIB',
    nameEn: 'Fibrinogen',
    unit: 'mg/dL',
    method: 'Claussë²•',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.PLASMA],
    minSampleVolume: 300,
    displayOrder: 62,
  },
  
  // ==================== ìš”ê²€ì‚¬ ====================
  {
    category: ClinicalTestCategory.URINALYSIS,
    code: 'UA_GENERAL',
    nameKr: 'ìš” ì¼ë°˜ê²€ì‚¬',
    nameEn: 'Urinalysis - General',
    unit: null,
    method: 'Dipstick, Microscopy',
    unitPrice: 10000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 500,
    displayOrder: 70,
  },
  {
    category: ClinicalTestCategory.URINALYSIS,
    code: 'UA_SEDIMENT',
    nameKr: 'ìš”ì¹¨ì‚¬ê²€ì‚¬',
    nameEn: 'Urine Sediment',
    unit: null,
    method: 'Microscopy',
    unitPrice: 20000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 500,
    displayOrder: 71,
  },
  
  // ==================== ìš” ìƒí™”í•™ (30,000ì›/í•­ëª©) ====================
  {
    category: ClinicalTestCategory.URINE_CHEMISTRY,
    code: 'U_UA',
    nameKr: 'U-UA',
    nameEn: 'Urine Uric acid',
    unit: 'mg/dL',
    method: 'Enzymatic colourë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 300,
    displayOrder: 80,
  },
  {
    category: ClinicalTestCategory.URINE_CHEMISTRY,
    code: 'U_MA',
    nameKr: 'U-MA',
    nameEn: 'Urine Magnesium',
    unit: 'mg/dL',
    method: 'Xylidyl blueë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 300,
    displayOrder: 81,
  },
  {
    category: ClinicalTestCategory.URINE_CHEMISTRY,
    code: 'U_BUN',
    nameKr: 'U-BUN',
    nameEn: 'Urine Blood urea nitrogen',
    unit: 'mg/dL',
    method: 'Urease-UVë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 300,
    displayOrder: 82,
  },
  {
    category: ClinicalTestCategory.URINE_CHEMISTRY,
    code: 'U_CRE',
    nameKr: 'U-CRE',
    nameEn: 'Urine Creatinine',
    unit: 'mg/dL',
    method: 'Jaffeë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 300,
    displayOrder: 83,
  },
  {
    category: ClinicalTestCategory.URINE_CHEMISTRY,
    code: 'U_TP',
    nameKr: 'U-TP',
    nameEn: 'Urine Total protein',
    unit: 'mg/dL',
    method: 'Pyrogallol redë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 300,
    displayOrder: 84,
  },
  {
    category: ClinicalTestCategory.URINE_CHEMISTRY,
    code: 'U_CA',
    nameKr: 'U-Ca',
    nameEn: 'Urine Calcium',
    unit: 'mg/dL',
    method: 'O-CPC ë²•',
    unitPrice: 30000,
    isPackage: false,
    packageItems: [],
    requiredSampleTypes: [SampleType.URINE],
    minSampleVolume: 300,
    displayOrder: 85,
  },
];

const clinicalQcSettings = [
  { category: ClinicalTestCategory.CBC, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.DIFF, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.RETIC, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.CHEMISTRY_GENERAL, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.ELECTROLYTE, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.CHEMISTRY_ADDITIONAL, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.COAGULATION, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.URINALYSIS, thresholdCount: 100, qcFee: 400000 },
  { category: ClinicalTestCategory.URINE_CHEMISTRY, thresholdCount: 100, qcFee: 400000 },
];

export async function seedClinicalPathology() {
  console.log('ðŸ”¬ Seeding Clinical Pathology data...');
  
  // ê²€ì‚¬í•­ëª© ì‹œë“œ
  for (const item of clinicalTestItems) {
    await prisma.clinicalTestItem.upsert({
      where: { code: item.code },
      update: item,
      create: item,
    });
  }
  console.log(`  âœ“ ${clinicalTestItems.length} test items seeded`);
  
  // QC ì„¤ì • ì‹œë“œ
  for (const setting of clinicalQcSettings) {
    await prisma.clinicalQcSetting.upsert({
      where: { category: setting.category },
      update: setting,
      create: setting,
    });
  }
  console.log(`  âœ“ ${clinicalQcSettings.length} QC settings seeded`);
  
  console.log('âœ… Clinical Pathology seed completed');
}

// ì§ì ‘ ì‹¤í–‰ ì‹œ
if (require.main === module) {
  seedClinicalPathology()
    .then(() => prisma.$disconnect())
    .catch((e) => {
      console.error(e);
      prisma.$disconnect();
      process.exit(1);
    });
}
